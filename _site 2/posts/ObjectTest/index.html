<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="ko-KR" >
  <head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4791588234419923"
     crossorigin="anonymous"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="CartAppTest" />
<meta property="og:locale" content="ko_KR" />
<meta name="description" content="어제 @ObservableObject, @StateObject와 관련된 글을 작성하면서 뭔가 테스트를 해보고싶어서 간단한 앱을 하나 만들어보려한다." />
<meta property="og:description" content="어제 @ObservableObject, @StateObject와 관련된 글을 작성하면서 뭔가 테스트를 해보고싶어서 간단한 앱을 하나 만들어보려한다." />
<link rel="canonical" href="http://localhost:4000/posts/ObjectTest/" />
<meta property="og:url" content="http://localhost:4000/posts/ObjectTest/" />
<meta property="og:site_name" content="Harold`s DLog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-11-14T08:33:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CartAppTest" />
<meta name="twitter:site" content="@twitter_username" />
<meta name="google-site-verification" content="AW90BDnepHsDdmQ6OaGtfM4bGYM_XM-4atRcFmERHVY" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-11-16T08:32:00+09:00","datePublished":"2024-11-14T08:33:00+09:00","description":"어제 @ObservableObject, @StateObject와 관련된 글을 작성하면서 뭔가 테스트를 해보고싶어서 간단한 앱을 하나 만들어보려한다.","headline":"CartAppTest","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/ObjectTest/"},"url":"http://localhost:4000/posts/ObjectTest/"}</script>
<!-- End Jekyll SEO tag -->


  <title>CartAppTest | Harold`s DLog
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Harold`s DLog">
<meta name="application-name" content="Harold`s DLog">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    
      <link rel="preconnect" href="https://polyfill.io" >
      <link rel="dns-prefetch" href="https://polyfill.io" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->
<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
  <!-- .sidebar-badge -->
    <a href="/" id="avatar" class="rounded-circle"><img src="https://i.ibb.co/SQtS8n8/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Harold`s DLog</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">토프레와 애플을 좋아하는 사람의 Daily, Dev Log</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>홈</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>카테고리</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>태그</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>아카이브</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>정보</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>
  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/haroldfromk"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['dongik369','naver.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">홈</a>
            </span>

          
        
          
        
          
            
              <span>CartAppTest</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      포스트
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="검색..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">취소</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>CartAppTest</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        게시
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1731540780"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2024/11/14
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          업데이트
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1731713520"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2024/11/16
</time>

        </span>
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/haroldfromk">Dongik Song</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="16556 단어"
>
  <em>91 분</em>읽는 시간</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <p>어제 <code class="language-plaintext highlighter-rouge">@ObservableObject, @StateObject</code>와 관련된 글을 작성하면서 뭔가 테스트를 해보고싶어서 간단한 앱을 하나 만들어보려한다.</p>

<p>장바구니 앱이며, https://dummyjson.com/products/1 사이트를 사용해서 DummyData가 있는 api를 호출하여 맘에드는 것을 담고,</p>

<p>장바구니를 초기화할때 <code class="language-plaintext highlighter-rouge">@ObservableObject, @StateObject</code>의 차이를 통해 보여지는 화면이 다를것으로 판단이 들어서 그걸 확인해보려한다.</p>

<p><a href="https://github.com/user-attachments/assets/22335a71-35b8-4133-a917-a79cd0d38b2a" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/22335a71-35b8-4133-a917-a79cd0d38b2a" alt="CleanShot 2024-11-14 at 13 50 51" loading="lazy"></a></p>

<p>우선 파일구조는 다음과 같다.</p>

<h2 id="1-모델링"><span class="me-2">1. 모델링</span><a href="#1-모델링" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">WishModel</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="nv">category</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">price</span><span class="p">,</span> <span class="n">discountPercentage</span><span class="p">,</span> <span class="nv">rating</span><span class="p">:</span> <span class="kt">Double</span>
    <span class="k">let</span> <span class="nv">stock</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">tags</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span>
    <span class="k">let</span> <span class="nv">brand</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">reviews</span><span class="p">:</span> <span class="p">[</span><span class="kt">Review</span><span class="p">]</span>
    <span class="k">let</span> <span class="nv">thumbnail</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="c1">// MARK: - Review</span>
<span class="kd">struct</span> <span class="kt">Review</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">rating</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">comment</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">reviewerName</span><span class="p">,</span> <span class="nv">reviewerEmail</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>우선은 이렇게 해두었다.</p>

<p>사실 간단한 테스트용이라 빼도 되는게 몇개 있긴한데 이정도만 살려두었다.</p>

<h2 id="2-화면구성"><span class="me-2">2. 화면구성</span><a href="#2-화면구성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>화면구성은 좀 심플하게 하려고한다.</p>

<p>탭바를 통해 2개의 화면을 구성한다.</p>

<h3 id="1-tabview-구성"><span class="me-2">1. TabView 구성</span><a href="#1-tabview-구성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>파일명은 MainView로 하였고 여기에 TabView를 사용 하여 Tabbar를 만든다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">MainView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">TabView</span> <span class="p">{</span>
            <span class="kt">Tab</span><span class="p">(</span><span class="s">"Display"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">DisplayView</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="kt">Tab</span><span class="p">(</span><span class="s">"cart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">CartView</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/81369ca6-6d1f-48dc-8e1e-aee9c8741395" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/81369ca6-6d1f-48dc-8e1e-aee9c8741395" alt="CleanShot 2024-11-14 at 14 57 24" width="50%" height="50%" loading="lazy"></a></p>

<p>이전에는</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kt">DisplayView</span><span class="p">()</span>
        <span class="o">.</span><span class="n">tabItem</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"Display"</span><span class="p">)</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span>
                <span class="p">}</span>
<span class="kt">CartView</span><span class="p">()</span>
        <span class="o">.</span><span class="n">tabItem</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"cart"</span><span class="p">)</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
                <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이런식으로 했지만 사용하려고하면 Deprecated 되었기에 써도 무관하지만 새롭게 사용하는 방식으로 하였다.</p>

<p>다만 2개를 혼용하여 사용하지는 못한다.</p>

<h3 id="2-첫번째-화면"><span class="me-2">2. 첫번째 화면</span><a href="#2-첫번째-화면" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>파일명은 DisplayView로 하였다.</p>

<h4 id="1-toolbar"><span class="me-2">1. ToolBar</span><a href="#1-toolbar" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p>상단에 장바구니 버튼을 누르면 menu를 띄워 추가, 전체삭제 이렇게 두개를 구성</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationStack</span> <span class="p">{</span>
            <span class="kt">NavigationView</span> <span class="p">{</span>
                
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">navigationBarItems</span><span class="p">(</span><span class="nv">trailing</span><span class="p">:</span> <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                
            <span class="p">},</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
            <span class="p">}))</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>하지만 <code class="language-plaintext highlighter-rouge">navigationBarItems</code> 역시 Deprecated 되었다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">DisplayView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
                <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
                    <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">navigationBarTrailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="nf">print</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
            <span class="p">}</span>
            
            <span class="kt">NavigationView</span> <span class="p">{</span>
                
                
            <span class="p">}</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>다만 toolBar를 사용하려면 Modifier개념으로 들어가기에 Text를 넣어주었다.</p>

<h4 id="2-itemview"><span class="me-2">2. ItemView</span><a href="#2-itemview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>가운데 화면에 제품설명</p>

<p>제품설명은 센터에 이미지, 하단에 제품명, 제품설명, 가격 이정도로 심플하게</p>

<p>이후에 위에 모델링한것들을 할지는 생각</p>

<p>ItemView라는 새로운 파일을 만들어 주었다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ItemView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">imageUrl</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">description</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">AsyncImage</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">imageUrl</span><span class="p">))</span> <span class="p">{</span> <span class="n">image</span> <span class="k">in</span>
                <span class="n">image</span>
                    <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
            <span class="p">}</span> <span class="nv">placeholder</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"photo"</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
            <span class="kt">HStack</span> <span class="p">{</span>
                <span class="kt">Spacer</span><span class="p">()</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/5136e4ac-15ec-418d-b8e8-96adfac191b6" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/5136e4ac-15ec-418d-b8e8-96adfac191b6" alt="CleanShot 2024-11-14 at 15 52 36" width="50%" height="50%" loading="lazy"></a></p>

<p>이렇게 세팅을 완료</p>

<p>이때 가격이 타입이 Double이라서 앞에 $표시를 간단하게 붙이게 하기위해 Extension을 사용하여 Function을 하나 만들어 준다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">Double</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">dollarAdd</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="nf">return</span> <span class="p">(</span><span class="s">"$</span><span class="se">\(</span><span class="k">self</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 만들면 굳이 <code class="language-plaintext highlighter-rouge">"$\(price)"</code> 이런식으로 번거롭게 할 필요가 없어진다.</p>

<p><a href="https://github.com/user-attachments/assets/000360c9-77b6-4b98-88f7-a1d46340f79d" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/000360c9-77b6-4b98-88f7-a1d46340f79d" alt="CleanShot 2024-11-14 at 15 54 53" width="50%" height="50%" loading="lazy"></a></p>

<p>현재는 이렇게 나온다.</p>

<p>Navigation Toolbar를 처음에 버튼으로 했다가. 생각해보니 메뉴로 보이게 하는게 좋을듯 해서 바꾼다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre> <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">navigationBarTrailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Menu</span> <span class="p">{</span>
                            <span class="kt">Button</span> <span class="p">{</span>
                                <span class="nf">print</span><span class="p">(</span><span class="s">"added"</span><span class="p">)</span>
                            <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                                <span class="kt">Text</span><span class="p">(</span><span class="s">"추가하기"</span><span class="p">)</span>
                                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.plus"</span><span class="p">)</span>
                            <span class="p">}</span>
                            <span class="kt">Button</span> <span class="p">{</span>
                                <span class="nf">print</span><span class="p">(</span><span class="s">"deleted"</span><span class="p">)</span>
                            <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                                <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 비우기"</span><span class="p">)</span>
                                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
                            <span class="p">}</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/62af07b0-99e0-44a3-bacd-66562c2e8182" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/62af07b0-99e0-44a3-bacd-66562c2e8182" alt="Simulator Screenshot - iPhone 16 Pro - 2024-11-14 at 16 06 38" width="50%" height="50%" loading="lazy"></a></p>

<p>그리고 아래에도 버튼을 만들어 주었다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre> <span class="kt">HStack</span> <span class="p">{</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="nf">print</span><span class="p">(</span><span class="s">"next"</span><span class="p">)</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"다음"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                <span class="p">}</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="nf">print</span><span class="p">(</span><span class="s">"add"</span><span class="p">)</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"추가"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/10b08a29-dff7-4ce3-aa3b-fc5029c73de2" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/10b08a29-dff7-4ce3-aa3b-fc5029c73de2" alt="CleanShot 2024-11-14 at 17 15 57" width="50%" height="50%" loading="lazy"></a></p>

<p>완료</p>

<p><strong>Menu에서는 장바구니 비우기 하나만 두기로 결정</strong></p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kt">Menu</span> <span class="p">{</span>
        <span class="kt">Button</span> <span class="p">{</span>
            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 비우기"</span><span class="p">)</span>
            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>현재는 이렇게 두었다.</p>

<h3 id="3-두번째-화면"><span class="me-2">3. 두번째 화면</span><a href="#3-두번째-화면" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>리스트를 사용해서 어떤 물건이 등록되었는지 보여주기</p>

<p>SwipeAction을 사용하여 개별 제거 가능.</p>

<p>파일명은 CartView로 하였다.</p>

<p>아직 데이터가 정확하게 들어오지 않았으므로 우선은 심플하게 뼈대만</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span><span class="p">()</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"상품명"</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"가격자리"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="3-api-관련-코드작성"><span class="me-2">3. Api 관련 코드작성</span><a href="#3-api-관련-코드작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>이전에 했던것처럼 Generic을 사용해서 해볼것이다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="kd">enum</span> <span class="kt">NetworkError</span><span class="p">:</span> <span class="kt">Error</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">badUrl</span>
    <span class="k">case</span> <span class="n">invalidRequest</span>
    <span class="k">case</span> <span class="n">badResponse</span>
    <span class="k">case</span> <span class="n">badStatus</span>
    <span class="k">case</span> <span class="n">failedToDecodeResponse</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">WishService</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="n">downLoadData</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">Codable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="k">async</span> <span class="o">-&gt;</span> <span class="kt">T</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badUrl</span> <span class="p">}</span>
            <span class="k">let</span> <span class="p">(</span><span class="nv">data</span><span class="p">,</span> <span class="nv">response</span><span class="p">)</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">response</span> <span class="o">=</span> <span class="n">response</span> <span class="k">as?</span> <span class="kt">HTTPURLResponse</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badResponse</span> <span class="p">}</span>
            <span class="k">guard</span> <span class="n">response</span><span class="o">.</span><span class="n">statusCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">response</span><span class="o">.</span><span class="n">statusCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badStatus</span> <span class="p">}</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">decodedData</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">failedToDecodeResponse</span> <span class="p">}</span>
            
            <span class="k">return</span> <span class="n">decodedData</span>
            
        <span class="p">}</span> <span class="k">catch</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badUrl</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"There was an error creating the URL"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badResponse</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Did not get a valid response"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badStatus</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Did not get a 2xx status code from the response"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">failedToDecodeResponse</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed to decode response into the given type"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"An error occured downloading the data"</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 만들어 준다.</p>

<p>이번엔 이전과 달리 decode에도 T를 사용함으로써 Generic을 유지한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="kt">WishViewModel</span><span class="p">:</span> <span class="kt">ObservableObject</span> <span class="p">{</span>
    <span class="kd">@Published</span> <span class="k">var</span> <span class="nv">wishList</span><span class="p">:</span> <span class="p">[</span><span class="kt">WishModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
            <span class="kt">Task</span> <span class="p">{</span>
                <span class="k">await</span> <span class="nf">fetchWishList</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">fetchWishList</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">randomNumber</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="kt">Int</span><span class="o">.</span><span class="nf">random</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="mi">1</span><span class="o">...</span><span class="mi">100</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"https://dummyjson.com/products/</span><span class="se">\(</span><span class="n">randomNumber</span><span class="se">)</span><span class="s">"</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">list</span><span class="p">:</span> <span class="kt">WishModel</span> <span class="o">=</span> <span class="k">await</span> <span class="kt">WishService</span><span class="p">()</span><span class="o">.</span><span class="nf">downLoadData</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">wishList</span> <span class="o">=</span> <span class="p">[</span><span class="n">list</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="4-api-호출하기"><span class="me-2">4. Api 호출하기</span><a href="#4-api-호출하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>여기서 선택지가 주어진다</p>

<p>ViewModel에 대해 <code class="language-plaintext highlighter-rouge">@ObservedObject</code> 또는 <code class="language-plaintext highlighter-rouge">@StateObject</code> 를 사용하는건데</p>

<p>지금은 크게 상관이 없어서 둘중 아무거나쓰고 나중에 비교할때 다시 관련 헤더를 만들어서 작성해보는걸로</p>

<p>ItemView에서 호출을 해보도록하자.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span> <span class="o">=</span> <span class="kt">WishViewModel</span><span class="p">()</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">AsyncImage</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">!.</span><span class="n">thumbnail</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이런식으로 해주었다.</p>

<p>데이터가 있어서 강제 언래핑을 하긴했지만 에러가 발생</p>

<p>아무래도 제대로 호출이 안된듯하다.</p>

<p><a href="https://github.com/user-attachments/assets/e78847aa-0e67-4fba-9af1-0e81f660ad03" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/e78847aa-0e67-4fba-9af1-0e81f660ad03" alt="CleanShot 2024-11-14 at 19 20 57" loading="lazy"></a></p>

<p>문제는 여기를 찍고 다음을 넘기게되면 바로 에러가뜨는곳으로 넘어가게 된다.</p>

<p>우선 뭐가 잘못되었는지 다시 코드를 봐야할듯하다.</p>

<p>우선 빼먹은건 ViewModel에서 <code class="language-plaintext highlighter-rouge">@MainActor</code>를 빼먹었다.</p>

<p>하지만 이게 문제는 아니었다.</p>

<p>관련된 뷰를 전부 주석으로 잡고</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badUrl</span> <span class="p">}</span>
<span class="k">let</span> <span class="p">(</span><span class="nv">data</span><span class="p">,</span> <span class="nv">response</span><span class="p">)</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">response</span> <span class="o">=</span> <span class="n">response</span> <span class="k">as?</span> <span class="kt">HTTPURLResponse</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badResponse</span> <span class="p">}</span>
<span class="k">guard</span> <span class="n">response</span><span class="o">.</span><span class="n">statusCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">response</span><span class="o">.</span><span class="n">statusCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">badStatus</span> <span class="p">}</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">decodedData</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">failedToDecodeResponse</span> <span class="p">}</span>

<span class="k">return</span> <span class="n">decodedData</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 해본결과</p>

<div class="language-text highlighter-rouge"><div class="code-header">
        <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>1757 bytes
&lt;NSHTTPURLResponse: 0x6000002e9280&gt; { URL: https://dummyjson.com/products/89 } { Status Code: 200, Headers {
생략
}
Failed to decode response into the given type
</pre></td></tr></tbody></table></code></div></div>

<p>1757bytes이기때문에 데이터도 제대로 받아왔다.</p>

<p>왜냐면 코드가 200이기 때문이다.</p>

<p>즉 호출은 제대로 되었고, 문제는 type이었다.</p>

<p>Generic을 사용했는데 어디서 문제인지 확인이 필요해보인다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">guard</span> <span class="k">let</span> <span class="nv">decodedData</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">WishModel</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="kt">NetworkError</span><span class="o">.</span><span class="n">failedToDecodeResponse</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>우선 여기를 그냥 모델로했을때는 출력이 된다.</p>

<p>즉 Generic사용에서 문제가 생겼다는것을 알 수 있다.</p>

<p>하지만 이건 문제 해결과정에서 내가 고치다가 잘못된것이었고 처음에는</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre> <span class="kd">func</span> <span class="nf">fetchWishList</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">randomNumber</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="kt">Int</span><span class="o">.</span><span class="nf">random</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="mi">1</span><span class="o">...</span><span class="mi">194</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"https://dummyjson.com/products/</span><span class="se">\(</span><span class="n">randomNumber</span><span class="se">)</span><span class="s">"</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">list</span><span class="p">:</span> <span class="kt">WishModel</span> <span class="o">=</span> <span class="k">await</span> <span class="kt">WishService</span><span class="p">()</span><span class="o">.</span><span class="nf">downLoadData</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">wishList</span> <span class="o">=</span> <span class="p">[</span><span class="n">list</span><span class="p">]</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 되어있었기에 크게 문제가 안된다.</p>

<p>다시 주석을 풀고 실행을 해보니 역시나 문제가 발생</p>

<p>뭔가 ViewModel을 가져와서 init을 했음에도 불구하고 data, response 부분에서 바로 계속 AsyncImage로 넘어가는게 이상하다.</p>

<p><strong>아무래도 api를 호출하면서 View가 먼저 렌더링 되기에 발생하는 문제로 보인다.</strong></p>

<p>아무래도 초기에 데이터값을 주어야하나보다.</p>

<p>그래서</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre><span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">AsyncImage</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">thumbnail</span> <span class="p">??</span> <span class="s">""</span><span class="p">))</span> <span class="p">{</span> <span class="n">image</span> <span class="k">in</span>
                <span class="n">image</span>
                    <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
            <span class="p">}</span> <span class="nv">placeholder</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"photo"</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">description</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
            <span class="kt">HStack</span> <span class="p">{</span>
                <span class="kt">Spacer</span><span class="p">()</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">()</span> <span class="p">??</span> <span class="s">"$"</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
            <span class="kt">HStack</span> <span class="p">{</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="nf">print</span><span class="p">(</span><span class="s">"next"</span><span class="p">)</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"다음"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                <span class="p">}</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="nf">print</span><span class="p">(</span><span class="s">"add"</span><span class="p">)</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"추가"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">isEmpty</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>옵셔널 체이닝을 통해 값을 주었다.</p>

<p>그제서야 해결….</p>

<p>그러면서 어떤 애들은 또 디코딩 에러가 나길래</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">WishModel</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">,</span> <span class="nv">description</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span>
    <span class="k">let</span> <span class="nv">thumbnail</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

<p>모델을 대폭 축소화한다.</p>

<p>이미지도 약간 사이즈마다 다른듯해서</p>

<p><code class="language-plaintext highlighter-rouge">.scaledToFill()</code> 이걸로 바꿔준다.</p>

<p><a href="https://github.com/user-attachments/assets/3557cbcd-42e0-4615-b20f-33831a3ef220" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/3557cbcd-42e0-4615-b20f-33831a3ef220" alt="Nov-14-2024 20-09-45" width="50%" height="50%" loading="lazy"></a></p>

<p>지금 다음을 눌렀을때 새롭게 가져오는건</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kt">Button</span> <span class="p">{</span>
                    <span class="kt">Task</span> <span class="p">{</span>
                        <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"다음"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>버튼에 이렇게 다시 fetch를 하도록 해두었기 때문.</p>

<hr />

<h2 id="5-cart-기능-구현"><span class="me-2">5. Cart 기능 구현</span><a href="#5-cart-기능-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>SwiftData와 CoreData 둘중 뭘해볼까 고민을 하다 구글링을 했는데</p>

<p><a href="https://www.inflearn.com/community/questions/1035841/swiftdata%EA%B0%80-core-data%EB%A5%BC-%EB%8C%80%EC%B2%B4%ED%95%98%EB%8A%94%EC%A7%80%EC%9A%94" target="_blank">질문</a>글이 있어서 읽어보니 뭐 그렇다고 한다.</p>

<p>그래서 CoreData를 간만에 다시 써보는걸로,</p>

<p>물론 UIKit에서는 AppDelegate에서 Container설정을 했는데 그부분은 좀 달라서 알아두면 좋긴 할듯하다.</p>

<p>이후 내가 작성한 글을 다시 읽어보다가 SwiftData도 조금 더 사용해볼겸 한프로젝트에 다시 사용해보는것도 좋을듯해서 만들어 보기로 결정. [11.16 수정]</p>

<h3 id="1-model-만들기"><span class="me-2">1. Model 만들기</span><a href="#1-model-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>여기는 좀 심플하게 List에만 보여주고 클릭시 새롭게 정보를 보여주는 용도는 아니라 가볍게 만든다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">CartModel</span><span class="p">:</span> <span class="kt">Identifiable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>간단하게 이름과 가격만으로 설정을 해둔다.</p>

<p>이때 list에 들어갈것이라 <code class="language-plaintext highlighter-rouge">Identifiable</code> 프로토콜을 채택해준다.</p>

<p>그래서 id도 같이 해준다.</p>

<p>SwiftUI에서 List를 사용할때는 데이터의 무결성을 중요시하므로 채택을 해주도록 하자.</p>

<h3 id="2-coredata-사용"><span class="me-2">2. CoreData 사용</span><a href="#2-coredata-사용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>UIKit을 사용할때는 AppDelegate에서 Container를 사용했는데</p>

<p><a href="https://www.youtube.com/watch?v=BPQkpxtgalY">Youtube</a>를 참고하여 구현해보았다.</p>

<h4 id="1-모델링-1"><span class="me-2">1. 모델링</span><a href="#1-모델링-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><a href="https://github.com/user-attachments/assets/9cc01577-1b43-4ea5-95f0-ab26d605eda9" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/9cc01577-1b43-4ea5-95f0-ab26d605eda9" alt="CleanShot 2024-11-14 at 23 49 15" loading="lazy"></a></p>

<p>여기서 생성을 해주자.</p>

<p><a href="https://github.com/user-attachments/assets/89f022c3-caec-455f-ad25-f991177e1efa" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/89f022c3-caec-455f-ad25-f991177e1efa" alt="CleanShot 2024-11-14 at 23 51 44" loading="lazy"></a></p>

<p>이때 파일명을 정하고 생성을 누르니 이런 창이 뜬다.</p>

<p>이전에 없었던것같은데, GPT에게 차이를 물어보았다.</p>

<h5 id="xcdatamodel-vs-xcdatamodeld-확장자-차이"><span class="me-2"><code class="language-plaintext highlighter-rouge">.xcdatamodel</code> vs <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 확장자 차이</span><a href="#xcdatamodel-vs-xcdatamodeld-확장자-차이" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p>Core Data에서 <strong>데이터 모델 파일</strong>을 생성할 때, 다음 두 가지 확장자를 사용할 수 있다:</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">.xcdatamodel</code></strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></strong></li>
</ol>

<p>Xcode에서는 <strong>올바른 확장자</strong> 사용을 권장하며, 아래는 두 확장자의 차이점이다.</p>

<h6 id="-차이점-요약">📝 차이점 요약</h6>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>확장자</th>
      <th>설명</th>
      <th>사용 시기</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><code class="language-plaintext highlighter-rouge">.xcdatamodel</code></strong></td>
      <td><strong>단일 데이터 모델 파일</strong>이다. 하나의 데이터 모델만 포함한다.</td>
      <td><strong>이전 버전의 Core Data</strong> 프로젝트</td>
    </tr>
    <tr>
      <td><strong><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></strong></td>
      <td><strong>데이터 모델 파일의 패키지</strong>이다. 여러 개의 <code class="language-plaintext highlighter-rouge">.xcdatamodel</code> 파일을 포함할 수 있다.</td>
      <td><strong>현재 버전의 Core Data</strong> 프로젝트</td>
    </tr>
  </tbody>
</table></div>

<h6 id="-xcdatamodel">📌 <code class="language-plaintext highlighter-rouge">.xcdatamodel</code></h6>

<ul>
  <li><strong>단일 모델 파일</strong>로, Core Data의 초기 버전에서 사용되었다.</li>
  <li><strong>버전 관리 기능이 없다.</strong></li>
  <li>이 확장자를 사용하면, 데이터 모델 변경 시 <strong>버전 관리가 불가능</strong>해 문제가 발생할 수 있다.</li>
</ul>

<h6 id="-xcdatamodeld">📌 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></h6>

<ul>
  <li><strong>패키지 디렉토리</strong>로, 여러 개의 <code class="language-plaintext highlighter-rouge">.xcdatamodel</code> 파일을 포함할 수 있다.</li>
  <li>Core Data의 <strong>버전 관리 기능</strong>을 지원한다.
    <ul>
      <li>예를 들어, <code class="language-plaintext highlighter-rouge">V1.xcdatamodel</code>, <code class="language-plaintext highlighter-rouge">V2.xcdatamodel</code>처럼 여러 버전의 모델을 저장할 수 있다.</li>
    </ul>
  </li>
  <li>현재 Xcode에서는 표준 확장자로 <strong><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></strong>를 사용하며, 데이터 모델의 <strong>버전 관리</strong>를 위해 권장된다.</li>
</ul>

<h6 id="️-xcode-알림-설명">⚠️ Xcode 알림 설명</h6>

<p>Xcode에서 <strong><code class="language-plaintext highlighter-rouge">.xcdatamodel</code></strong> 확장자를 사용해 파일을 생성하려고 하면, <strong><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></strong> 확장자를 권장하는 알림이 나타난다.</p>

<ul>
  <li><strong>“Use .xcdatamodel”</strong>: 단일 모델 파일을 사용하겠다는 의미로, <strong>버전 관리가 불가능</strong>하다.</li>
  <li><strong>“Use .xcdatamodeld”</strong>: 패키지 확장자를 사용하며, <strong>버전 관리 기능</strong>을 사용할 수 있다.</li>
  <li><strong>“Cancel”</strong>: 파일 생성을 취소한다.</li>
</ul>

<h6 id="-권장-사항">✅ 권장 사항</h6>

<ul>
  <li>현재 프로젝트에서는 <strong><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code></strong> 확장자를 사용하는 것이 권장된다.</li>
  <li>이를 통해 Core Data의 <strong>버전 관리 기능</strong>을 활용할 수 있으며, 데이터 모델 변경 시 문제가 줄어든다.</li>
</ul>

<p>따라서, 창에서 <strong>“Use .xcdatamodeld”</strong> 옵션을 선택하는 것이 올바른 선택이다.</p>

<hr />

<p><a href="https://github.com/user-attachments/assets/cde56b90-e84a-4936-9f80-4031b44642c2" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/cde56b90-e84a-4936-9f80-4031b44642c2" alt="CleanShot 2024-11-15 at 00 07 18" loading="lazy"></a></p>

<p>이렇게 모델링 그대로 설정을 해준다.</p>

<p>이때 Entity 명은 <code class="language-plaintext highlighter-rouge">Cart</code>로 해준다</p>

<h4 id="2-container-생성-및-함수-구현"><span class="me-2">2. Container 생성 및 함수 구현</span><a href="#2-container-생성-및-함수-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>ViewModel에 Container를 생성하고 이때 init을 통해 ViewModel 객체가 만들어질때 자연스럽게 Container를 생성하는 방식으로 이루어 진다.</p>

<h5 id="1-container-만들기"><span class="me-2">1. Container 만들기</span><a href="#1-container-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">container</span><span class="p">:</span> <span class="kt">NSPersistentContainer</span>
    
    <span class="kd">@Published</span> <span class="k">var</span> <span class="nv">cart</span><span class="p">:</span> <span class="p">[</span><span class="kt">Cart</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">container</span> <span class="o">=</span> <span class="kt">NSPersistentContainer</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Cart"</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">loadPersistentStores</span> <span class="p">{</span> <span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">error</span> <span class="p">{</span>
                <span class="nf">fatalError</span><span class="p">(</span><span class="s">"Failed to load persistent stores: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 만들어 준다.</p>

<p>Container를 만들면서 init에 집어넣음으로써,</p>

<p>ViewModel이 만들어지면서 Container가 만들어지게 된다.</p>

<h5 id="2-fetch-함수-구현"><span class="me-2">2. Fetch 함수 구현</span><a href="#2-fetch-함수-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">fetchRequest</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">NSFetchRequest</span><span class="o">&lt;</span><span class="kt">Cart</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">entityName</span><span class="p">:</span> <span class="s">"Cart"</span><span class="p">)</span>
    
    <span class="k">do</span> <span class="p">{</span>
        <span class="n">cart</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">fetch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Fetch failed: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>뭐 사실 크게 이질적인 부분은 없는듯 하다.</p>

<p>가끔 CoreData의 Entity가 만들어지지 않아 <code class="language-plaintext highlighter-rouge">Cart</code>를 적어도 없다고 뜨는경우엔 Xcode를 재실행하면 만들어진다.</p>

<h5 id="3-장바구니-담기-구현"><span class="me-2">3. 장바구니 담기 구현</span><a href="#3-장바구니-담기-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">WishModel</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="kt">Cart</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="p">)</span>
    <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kt">Int64</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">title</span>
    <span class="n">item</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">price</span>
    
    <span class="nf">saveData</span><span class="p">()</span>
<span class="p">}</span>
    
<span class="kd">func</span> <span class="nf">saveData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">save</span><span class="p">()</span>
        <span class="nf">fetchRequest</span><span class="p">()</span> <span class="c1">// added</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Save failed: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이건 저장하는것도 같이 첨부를 하는데, 이전에도 작성을 해둔적이 있지만, CoreData의 Data가 변할때는 Save를 반드시 해주어야 한다.</p>

<p>(11.16 추가) 그리고 이전에 깜빡하고 적지 않았는데 fetch함수를 추가하여 배열이 업데이트 되도록 하였다.</p>

<h5 id="4-삭제기능-구현"><span class="me-2">4. 삭제기능 구현</span><a href="#4-삭제기능-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">deleteData</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="kt">Cart</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
    <span class="nf">saveData</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">deleteAllData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">NSFetchRequest</span><span class="o">&lt;</span><span class="kt">NSFetchRequestResult</span><span class="o">&gt;</span> <span class="o">=</span> <span class="kt">Cart</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">deleteRequest</span> <span class="o">=</span> <span class="kt">NSBatchDeleteRequest</span><span class="p">(</span><span class="nv">fetchRequest</span><span class="p">:</span> <span class="n">request</span><span class="p">)</span>
    
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">execute</span><span class="p">(</span><span class="n">deleteRequest</span><span class="p">)</span>
        <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">save</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Delete failed: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이것도 부분삭제, 전체삭제를 한꺼번에 한다.</p>

<p>전체삭제가 기억나지가 않아서, <a href="https://www.hackingwithswift.com/forums/swiftui/delete-all-item-from-core-data-with-button/16512" target="_blank">참고</a> 글을 보고 적용했다.</p>

<p>이전에도 이부분을 아마 해외사이트 보고 참고해서 적었던 기억이있다.</p>

<h3 id="3-swiftdata-사용-1116-수정"><span class="me-2">3. SwiftData 사용 (11.16 수정)</span><a href="#3-swiftdata-사용-1116-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>SwiftData도 사용하면 좋을듯해서 이미 프로젝트파일 자체는 다 만들어졌기에 새롭게 버튼을 하나 추가해서 Coredata저장, SwiftData저장 이렇게 버튼을 나눠본다.</p>

<p>이전에 <a href="https://haroldfromk.github.io/posts/SwiftData/" target="_blank">글</a>을 작성을 해봤기에 그걸 좀 참고하면서 작성하면 더 각인이 되지 않을까 싶다.</p>

<h4 id="1-모델링-2"><span class="me-2">1. 모델링</span><a href="#1-모델링-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>이전에 만들었던 <code class="language-plaintext highlighter-rouge">CartModel</code>을 사용하는것보다, 새롭게 만들어서 비교를 하는게 좋을듯해서 새롭게 만들어본다.</p>

<p><a href="https://github.com/user-attachments/assets/02edfbb9-37c0-4bda-8d86-fa611c9271be" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/02edfbb9-37c0-4bda-8d86-fa611c9271be" alt="CleanShot 2024-11-16 at 07 34 45" loading="lazy"></a></p>

<p>우선 SwiftData를 사용할때는 <code class="language-plaintext highlighter-rouge">@Model</code> Wrapper를 사용해준다.</p>

<p>이때 보통 우리가 모델링을 할때는 <code class="language-plaintext highlighter-rouge">struct</code>를 사용했지만 이녀석은 <strong><code class="language-plaintext highlighter-rouge">class</code>를 사용</strong>해줘야한다.</p>

<p><a href="https://github.com/user-attachments/assets/5c3c801f-c487-4afd-afea-80301084dc7c" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/5c3c801f-c487-4afd-afea-80301084dc7c" alt="CleanShot 2024-11-16 at 07 33 42" loading="lazy"></a></p>

<p>그렇게 바꾸고 나니 이런에러가 난다.</p>

<p>첫번째는 init을 해주지 않아서 발생.</p>

<p>두번째는 Swift6 부터는 에러가 발생할거라고 경고를 준다.</p>

<p>let을 사용하지말라는것이다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">SwiftData</span>

<span class="kd">@Model</span>
<span class="kd">class</span> <span class="kt">SDCartModel</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">id</span>
        <span class="k">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="k">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 작성을 해주면 아주 기본적인 모델링이 완성되고, 모든 에러와 경고가 깔끔하게 사라진다.</p>

<p>이후에 무결성이 필요하다면</p>

<p><code class="language-plaintext highlighter-rouge">#Unique</code>나 <code class="language-plaintext highlighter-rouge">@Attribute</code>를 추가로 사용하겠다.</p>

<p><code class="language-plaintext highlighter-rouge">@Model</code>을 사용해준 이유는 해당 클래스가 SwiftData의 데이터 모델로 인식되도록 지정한다. 이를 통해 이 클래스의 인스턴스는 SwiftData에서 관리되는 데이터베이스 엔티티가 된다. (이전 글에서도 서술)</p>

<h4 id="2-swiftdata용-button과-view새롭게-추가"><span class="me-2">2. SwiftData용 Button과 View새롭게 추가.</span><a href="#2-swiftdata용-button과-view새롭게-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<h5 id="1-sdcartview"><span class="me-2">1. SDCartView</span><a href="#1-sdcartview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span> <span class="p">{</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                    <span class="kt">HStack</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                        <span class="kt">Spacer</span><span class="p">()</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">swipeActions</span><span class="p">(</span><span class="nv">edge</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">currentCartItem</span> <span class="o">=</span> <span class="n">cart</span>
                            <span class="n">isDelete</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"trash"</span><span class="p">)</span>
                        <span class="p">}</span>
                        
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">alert</span><span class="p">(</span><span class="s">"항목 삭제"</span><span class="p">,</span> <span class="nv">isPresented</span><span class="p">:</span> <span class="n">$isDelete</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"삭제"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">destructive</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="n">currentCartItem</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteData</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"취소"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">)</span> <span class="p">{}</span>
            <span class="p">}</span> <span class="nv">message</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"이 항목을 삭제하시겠습니까?"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>일단은 기존에 만든 CartView의 내용을 그대로 가져왔다.</p>

<p>아래 서술할 작업들을 해두고 나서 하나씩 수정을 이에 맞게 할생각이다.</p>

<h5 id="2-mainview"><span class="me-2">2. MainView</span><a href="#2-mainview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kt">Button</span> <span class="p">{</span>
        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"SD장바구니 비우기"</span><span class="p">)</span>
        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
    <span class="p">}</span>

<span class="kt">Tab</span><span class="p">(</span><span class="s">"SDCart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart.circle"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">SDCartView</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 메뉴와 탭을 하나 더 추가를 해준다.</p>

<h5 id="3-itemview"><span class="me-2">3. ItemView</span><a href="#3-itemview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p>여기서는 SwiftData에 추가를 해줄 버튼만 하나 만들어 주면 된다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kt">Button</span> <span class="p">{</span>
            
        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"SD추가"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="p">}</span>
<span class="c1">//                .alert(isPresented: $isDuplicated) {</span>
<span class="c1">//                    Alert(title: Text("중복 확인"),</span>
<span class="c1">//                          message: Text("이미 장바구니에 있습니다."))</span>
<span class="c1">//                }</span>
</pre></td></tr></tbody></table></code></div></div>

<p>우선은 이렇게만 뼈대를 해준다.</p>

<p>Frame을 이전에는 버튼이 2개라 90%정도 있으면 좋을듯해서 가로길이의 0.45 였으나, 버튼이 3개므로 0.3을 적용해주었다.</p>

<p><a href="https://github.com/user-attachments/assets/aec08390-0b5c-4e05-a73b-9dbd03b10aa8" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/aec08390-0b5c-4e05-a73b-9dbd03b10aa8" alt="simulator_screenshot_9CA1BFA6-DC3A-4405-B443-94E204593626" width="50%" height="50%" loading="lazy"></a></p>

<p>적용된사진은 다음과 같다.</p>

<h4 id="3-container-생성-및-함수-구현"><span class="me-2">3. Container 생성 및 함수 구현</span><a href="#3-container-생성-및-함수-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>여기서 부터는 <a href="https://www.hackingwithswift.com/quick-start/swiftdata/how-to-use-mvvm-to-separate-swiftdata-from-your-views" target="_blank">참고글</a>을 바탕으로 좀 만들어 보려고한다.</p>

<h5 id="1-container-만들기-1"><span class="me-2">1. Container 만들기</span><a href="#1-container-만들기-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p>보통은 앱과 똑같은 명의 swift파일에 하는듯하다.</p>

<p>UIKit에서의 AppDelegate와 같은 위치랄까</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">@main</span>
<span class="kd">struct</span> <span class="kt">ApiCartApp</span><span class="p">:</span> <span class="kt">App</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">container</span><span class="p">:</span> <span class="kt">ModelContainer</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">Scene</span> <span class="p">{</span>
        <span class="kt">WindowGroup</span> <span class="p">{</span>
            <span class="kt">MainView</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">modelContainer</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="n">container</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">ModelContainer</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">SDCartModel</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>우선은 이렇게 만들었다.</p>

<p>Container에 들어가는 for는 우리가 만들어둔 모델을 적용하면된다.</p>

<p><del>이때 원래는 <code class="language-plaintext highlighter-rouge">MainView(modelContext: container.mainContext)</code> 이런식으로 context를 전달해야하는데 아직 완성되지않아서 함수를 구현다 하고 다시 세팅할 예정</del></p>

<p><a href="https://medium.com/@dikidwid0/implement-swiftdata-in-swiftui-using-mvvm-architecture-pattern-aa3a9973c87c" target="_blank">Medium</a>글을 읽어보는데, Coredata처럼 ViewModel에서도 container init이 가능하다.</p>

<p>그래서 좀 수정을 해본다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kd">@MainActor</span>
<span class="kd">class</span> <span class="kt">SDCartViewModel</span><span class="p">:</span> <span class="kt">ObservableObject</span> <span class="p">{</span>
    
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">modelContainer</span><span class="p">:</span> <span class="kt">ModelContainer</span>
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">modelContext</span><span class="p">:</span> <span class="kt">ModelContext</span>
    
    <span class="kd">@Published</span> <span class="k">var</span> <span class="nv">cart</span><span class="p">:</span> <span class="p">[</span><span class="kt">SDCartModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">modelContainer</span> <span class="o">=</span> <span class="k">try!</span> <span class="kt">ModelContainer</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">SDCartModel</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">configurations</span><span class="p">:</span> <span class="kt">ModelConfiguration</span><span class="p">(</span><span class="nv">isStoredInMemoryOnly</span><span class="p">:</span> <span class="kc">true</span><span class="p">))</span>
        <span class="k">self</span><span class="o">.</span><span class="n">modelContext</span> <span class="o">=</span> <span class="n">modelContainer</span><span class="o">.</span><span class="n">mainContext</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">fetchRequest</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SDCartModel</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">try</span> <span class="n">modelContext</span><span class="o">.</span><span class="nf">fetch</span><span class="p">(</span><span class="kt">FetchDescriptor</span><span class="o">&lt;</span><span class="kt">SDCartModel</span><span class="o">&gt;</span><span class="p">())</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 적용하게되면 처음에 App.swift에서는 만들 필요가 없어진다.</p>

<p>그래서 지웠다.</p>

<p><code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly: true</code>?</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>속성</th>
      <th>설명</th>
      <th><code class="language-plaintext highlighter-rouge">true</code>일 때</th>
      <th><code class="language-plaintext highlighter-rouge">false</code>일 때</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly</code></td>
      <td>메모리에만 데이터를 저장할지 여부 설정</td>
      <td>메모리에만 저장하고, 디스크에 저장하지 않음</td>
      <td>디스크에 영구적으로 데이터를 저장함</td>
    </tr>
    <tr>
      <td><strong>장점</strong></td>
      <td>빠른 데이터 접근 속도</td>
      <td>테스트 용도 또는 임시 데이터 처리에 적합</td>
      <td>영구적인 데이터 저장 가능</td>
    </tr>
    <tr>
      <td><strong>단점</strong></td>
      <td>데이터 영구성</td>
      <td>앱 종료 시 데이터 손실</td>
      <td>디스크 I/O로 인해 성능 저하 가능</td>
    </tr>
    <tr>
      <td><strong>사용 예시</strong></td>
      <td>용도</td>
      <td>테스트 및 임시 데이터</td>
      <td>실제 사용자 데이터, 영구적 저장 필요</td>
    </tr>
  </tbody>
</table></div>

<h5 id="2-fetch-함수-구현-1"><span class="me-2">2. Fetch 함수 구현</span><a href="#2-fetch-함수-구현-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p><del>크게 Fetch 함수에 대해선 없는게 그냥 우리가 만든 배열에 저장이되고 그걸 그냥 가져다 쓰면 된다.</del></p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">fetchRequest</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="n">cart</span> <span class="o">=</span> <span class="k">try</span> <span class="n">modelContext</span><span class="o">.</span><span class="nf">fetch</span><span class="p">(</span><span class="kt">FetchDescriptor</span><span class="o">&lt;</span><span class="kt">SDCartModel</span><span class="o">&gt;</span><span class="p">())</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>특이한 점이라면 request가 아닌 <a href="https://developer.apple.com/documentation/swiftdata/fetchdescriptor" target="_blank">FetchDescriptor</a>를 사용했다는 점.</p>

<p>Docs를 보게 되면 애초에 Fetch를 하면서 원하는 조건을 설정하여 가져올 수 있게 되어있다.</p>

<p>두개 차이는 아래에서 추후 서술.</p>

<h5 id="3-장바구니-담기-구현-1"><span class="me-2">3. 장바구니 담기 구현</span><a href="#3-장바구니-담기-구현-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">WishModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="kt">SDCartModel</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="nv">price</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">price</span><span class="p">)</span>
        <span class="n">modelContext</span><span class="o">.</span><span class="nf">insert</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="nf">saveCart</span><span class="p">()</span>
    <span class="p">}</span>

<span class="kd">func</span> <span class="nf">saveCart</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">try</span> <span class="n">modelContext</span><span class="o">.</span><span class="nf">save</span><span class="p">()</span>
            <span class="nf">fetchRequest</span><span class="p">()</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>CoreData와 거의 유사 딱히 서술할점은 없어보인다.</p>

<h5 id="4-삭제기능-구현-1"><span class="me-2">4. 삭제기능 구현</span><a href="#4-삭제기능-구현-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">deleteCart</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="kt">SDCartModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">modelContext</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
        <span class="nf">saveCart</span><span class="p">()</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>전체삭제는 <a href="https://www.hackingwithswift.com/quick-start/swiftdata/how-to-delete-all-instances-of-a-particular-model" target="_blank">참고글</a>을 보고 작성한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">deleteAllCart</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">try</span> <span class="n">modelContext</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">SDCartModel</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
            <span class="nf">saveCart</span><span class="p">()</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="6-담기-기능-적용하기"><span class="me-2">6. 담기 기능 적용하기.</span><a href="#6-담기-기능-적용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-coredata"><span class="me-2">1. CoreData</span><a href="#1-coredata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>생각을 해보니 ViewModel을 가져다 적용을하는데</p>

<p>Navigation Toolbar는 DisplayView에 담기버튼은 ItemView에 있다.</p>

<p>일단은 진행을 해보자, 어차피 CoreData에 있는걸 배열로 가져오는것이기에 크게 문제는 없어보인다. (1차생각)</p>

<p>우선은 직관적으로 보이기 쉬운 ItemView에서 먼저 기능을 구현해보기로 한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>

<span class="kt">Button</span> <span class="p">{</span>
        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 해주었다.</p>

<h4 id="1-저장경로-확인하기"><span class="me-2">1. 저장경로 확인하기</span><a href="#1-저장경로-확인하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>이전에는 <code class="language-plaintext highlighter-rouge">print(FileManager.default.urls(for: .documentDirectory, in: .userDomainMask))</code></p>

<p>이걸통해서 확인했는데, 그대로 한번 적용해서 되는지 확인해보자.</p>

<p>경로 바로 이동하는건 <strong>Command + Shift + G</strong></p>

<p>sqlViewer에서는 안보여서 그냥 바로 다음스텝으로 간다.</p>

<h4 id="2-두번째-화면에서-list를-통해-가져오기"><span class="me-2">2. 두번째 화면에서 List를 통해 가져오기</span><a href="#2-두번째-화면에서-list를-통해-가져오기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">CartView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>기존 두번째 화면에서 viewModel 쪽만 추가.</p>

<p><a href="https://github.com/user-attachments/assets/262bc131-93c3-4cfe-a557-ee28a0f35b14" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/262bc131-93c3-4cfe-a557-ee28a0f35b14" alt="Simulator Screenshot - iPhone 16 Pro - 2024-11-15 at 04 00 51" width="50%" height="50%" loading="lazy"></a></p>

<p>추가했던게 잘 나오고 있었다.</p>

<p>안되는줄알고 무지성으로 눌렀더니 중복 문제가 발생.</p>

<div class="language-text highlighter-rouge"><div class="code-header">
        <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ForEach&lt;Array&lt;Cart&gt;, Int64, HStack&lt;TupleView&lt;(Text, Spacer, Text)&gt;&gt;&gt;: the ID 116 occurs multiple times within the collection, this will give undefined results!
</pre></td></tr></tbody></table></code></div></div>

<p>예외처리는 추후에 다시 하는걸로.</p>

<p><a href="https://github.com/user-attachments/assets/edd97ef4-a449-4e19-9d6e-0e0e569248df" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/edd97ef4-a449-4e19-9d6e-0e0e569248df" alt="CleanShot 2024-11-16 at 12 40 10" loading="lazy"></a>
(11.16 사진 추가)</p>

<h3 id="2-swiftdata"><span class="me-2">2. SwiftData</span><a href="#2-swiftdata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>(11.16 추가)
이제 추가를 해보는 단계이다.</p>

<h4 id="1-itemview에-viewmodel-추가"><span class="me-2">1. ItemView에 Viewmodel 추가</span><a href="#1-itemview에-viewmodel-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="kt">SDCartViewModel</span>

<span class="kt">Button</span> <span class="p">{</span>
        <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"SD추가"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 해주었다. 당연히 의존성 주입을 위해 MainView에는</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">sdCartViewModel</span> <span class="o">=</span> <span class="kt">SDCartViewModel</span><span class="p">()</span>

<span class="kt">Button</span> <span class="p">{</span>
        <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">deleteAllCart</span><span class="p">()</span>
    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"SD장바구니 비우기"</span><span class="p">)</span>
        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
    <span class="p">}</span>

<span class="kt">Tab</span><span class="p">(</span><span class="s">"Display"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">ItemView</span><span class="p">(</span><span class="nv">wishViewModel</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="p">,</span>
                                 <span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">,</span>
                                 <span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="n">sdCartViewModel</span><span class="p">)</span>
                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 적용을 해주었다.</p>

<h4 id="2-sdcartview-적용"><span class="me-2">2. SDCartView 적용</span><a href="#2-sdcartview-적용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="kt">SDCartViewModel</span>
</pre></td></tr></tbody></table></code></div></div>
<p>viewmodel을 전달해주니 바로 적용이된다.</p>

<p><a href="https://github.com/user-attachments/assets/3976cecb-610d-4307-97c1-9b4b0a7eccea" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/3976cecb-610d-4307-97c1-9b4b0a7eccea" alt="simulator_screenshot_F2CC8B96-8A72-4509-9032-5D4327FF01B2" width="50%" height="50%" loading="lazy"></a><a href="https://github.com/user-attachments/assets/6185da6e-f315-4351-a951-3ab6abe1add3" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/6185da6e-f315-4351-a951-3ab6abe1add3" alt="simulator_screenshot_67511425-DFD8-4CD7-8412-56DBC65BE7E0" width="50%" height="50%" loading="lazy"></a></p>

<p>움짤 귀찮아서 패스</p>

<p>이제 기능을 적용해보자.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">SDCartView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="kt">SDCartViewModel</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">isDelete</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">currentCartItem</span><span class="p">:</span> <span class="kt">SDCartModel</span><span class="p">?</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span> <span class="p">{</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">sdCartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                    <span class="kt">HStack</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                        <span class="kt">Spacer</span><span class="p">()</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">swipeActions</span><span class="p">(</span><span class="nv">edge</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">currentCartItem</span> <span class="o">=</span> <span class="n">cart</span>
                            <span class="n">isDelete</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"trash"</span><span class="p">)</span>
                        <span class="p">}</span>
                        
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">alert</span><span class="p">(</span><span class="s">"항목 삭제"</span><span class="p">,</span> <span class="nv">isPresented</span><span class="p">:</span> <span class="n">$isDelete</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"삭제"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">destructive</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="k">let</span> <span class="nv">currentCartItem</span> <span class="p">{</span>
                        <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">deleteCart</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">currentCartItem</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"취소"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">)</span> <span class="p">{}</span>
            <span class="p">}</span> <span class="nv">message</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"이 항목을 삭제하시겠습니까?"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>완료.</p>

<p>이전에 Coredata할때 처럼 중복추가에 대해서도 적용을 해본다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre> <span class="n">f</span> <span class="k">let</span> <span class="nv">checkTitle</span> <span class="o">=</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span> <span class="p">{</span>
                        <span class="n">isDuplicated</span> <span class="o">=</span> <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">checkDuplicate</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">checkTitle</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">isDuplicated</span> <span class="o">==</span> <span class="kc">false</span> <span class="p">{</span>
                            <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nf">print</span><span class="p">(</span><span class="s">"Title does not exist"</span><span class="p">)</span>
                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>코드는 동일</p>

<p><a href="https://github.com/user-attachments/assets/d0532950-7e94-4bb7-b24e-b5924343e304" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/d0532950-7e94-4bb7-b24e-b5924343e304" alt="simulator_screenshot_88963A3B-BF04-4F94-8217-3B168BE88FD7" width="50%" height="50%" loading="lazy"></a></p>

<p>작동 확인 완료.</p>

<p><a href="https://github.com/user-attachments/assets/b8a405e0-15be-4ce7-a3ec-13feba5a9e58" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/b8a405e0-15be-4ce7-a3ec-13feba5a9e58" alt="CleanShot 2024-11-16 at 12 38 58" loading="lazy"></a></p>

<p>이렇게 확인도 된다.</p>

<h2 id="7-swipeaction을-통한-삭제기능-구현"><span class="me-2">7. SwipeAction을 통한 삭제기능 구현</span><a href="#7-swipeaction을-통한-삭제기능-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>로드되는것도 확인이 되었으니 이제 swipeaction을 통해 삭제를 해보자.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span> <span class="p">{</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                    <span class="kt">HStack</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                        <span class="kt">Spacer</span><span class="p">()</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">swipeActions</span><span class="p">(</span><span class="nv">edge</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteData</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">cart</span><span class="p">)</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"trash"</span><span class="p">)</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 swipeaction을 추가해주었다.</p>

<p>삭제는 되는데 문제는 바로 업데이트가 되지않고, 재실행을 해야 지워진게 확인됨을 알았다.</p>

<p>그리고 추가를하고 탭뷰를 눌러서 카트를 가보면 UIUpdate가 되지않기에 onappear를 사용했다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">CartView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">List</span> <span class="p">{</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                    <span class="kt">HStack</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                        <span class="kt">Spacer</span><span class="p">()</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">swipeActions</span><span class="p">(</span><span class="nv">edge</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteData</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">cart</span><span class="p">)</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"trash"</span><span class="p">)</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/e33f7074-ff79-4f0e-b3a4-6860edbf38aa" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/e33f7074-ff79-4f0e-b3a4-6860edbf38aa" alt="Nov-15-2024 04-14-00" width="50%" height="50%" loading="lazy"></a></p>

<p>우선 작동은 완료.</p>

<p>사진을 다시보니 CartView 쪽에선 navigation tab bar가 보이지 않아서 지우고 MainView에 통합시킨다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">MainView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
                <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
                    <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">navigationBarTrailing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Menu</span> <span class="p">{</span>
                            <span class="kt">Button</span> <span class="p">{</span>
                                <span class="nf">print</span><span class="p">(</span><span class="s">"added"</span><span class="p">)</span>
                            <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                                <span class="kt">Text</span><span class="p">(</span><span class="s">"추가하기"</span><span class="p">)</span>
                                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.plus"</span><span class="p">)</span>
                            <span class="p">}</span>
                            <span class="kt">Button</span> <span class="p">{</span>
                                <span class="nf">print</span><span class="p">(</span><span class="s">"deleted"</span><span class="p">)</span>
                            <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                                <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 비우기"</span><span class="p">)</span>
                                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
                            <span class="p">}</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
            <span class="p">}</span>
            <span class="kt">NavigationView</span> <span class="p">{</span>
                <span class="kt">TabView</span> <span class="p">{</span>
                    <span class="kt">Tab</span><span class="p">(</span><span class="s">"Display"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">ItemView</span><span class="p">()</span>
                    <span class="p">}</span>
                    <span class="kt">Tab</span><span class="p">(</span><span class="s">"cart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">CartView</span><span class="p">()</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>사진은 패스.</p>

<p>NavigationView가 의미없이 사용이되어 개선을 한다 (11.16)</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">MainView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span> <span class="o">=</span> <span class="kt">WishViewModel</span><span class="p">()</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">sdCartViewModel</span> <span class="o">=</span> <span class="kt">SDCartViewModel</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationStack</span> <span class="p">{</span>
            <span class="kt">TabView</span> <span class="p">{</span>
                <span class="kt">Tab</span><span class="p">(</span><span class="s">"Display"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">ItemView</span><span class="p">(</span><span class="nv">wishViewModel</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="p">,</span>
                             <span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">,</span>
                             <span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="n">sdCartViewModel</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="kt">Tab</span><span class="p">(</span><span class="s">"CoreCart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">CoreCartView</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="kt">Tab</span><span class="p">(</span><span class="s">"SDCart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart.circle"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">SDCartView</span><span class="p">(</span><span class="nv">sdCartViewModel</span><span class="p">:</span> <span class="n">sdCartViewModel</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="kt">Tab</span><span class="p">(</span><span class="s">"Test"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"star"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">TestView</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
                <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">navigationBarTrailing</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">Menu</span> <span class="p">{</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Text</span><span class="p">(</span><span class="s">"Core 장바구니 비우기"</span><span class="p">)</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
                        <span class="p">}</span>
                        <span class="kt">Button</span> <span class="p">{</span>
                            <span class="n">sdCartViewModel</span><span class="o">.</span><span class="nf">deleteAllCart</span><span class="p">()</span>
                        <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                            <span class="kt">Text</span><span class="p">(</span><span class="s">"SD 장바구니 비우기"</span><span class="p">)</span>
                            <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>개선 이유중 하나는 TestView에는 필요가 없는것도 있다.</p>

<h2 id="8-전체-삭제-적용"><span class="me-2">8. 전체 삭제 적용</span><a href="#8-전체-삭제-적용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="n">toolbar</span> <span class="p">{</span>
        <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">navigationBarTrailing</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Menu</span> <span class="p">{</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="nf">print</span><span class="p">(</span><span class="s">"added"</span><span class="p">)</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"추가하기"</span><span class="p">)</span>
                    <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.plus"</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="kt">Button</span> <span class="p">{</span>
                    <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
                <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 비우기"</span><span class="p">)</span>
                    <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart.badge.minus"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>우선 전체 삭제는 되지만, View가 서로 달라서 CartView가 활성화 된상태에서 비우면 바로 적용이 안되는 문제가 있다.</p>

<h2 id="9-coredata-vs-swiftdata"><span class="me-2">9. CoreData vs SwiftData</span><a href="#9-coredata-vs-swiftdata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>비교는 내가 작성한 코드와 간단하게 정리한것을 바탕으로 GPT를 통해 정리해달라고 했다.</p>

<h3 id="coredata와-swiftdata-비교-표"><span class="me-2">CoreData와 SwiftData 비교 표</span><a href="#coredata와-swiftdata-비교-표" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>항목</th>
      <th>CoreData (<code class="language-plaintext highlighter-rouge">NSPersistentContainer</code>)</th>
      <th>SwiftData (<code class="language-plaintext highlighter-rouge">ModelContainer</code>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>데이터 컨테이너</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSPersistentContainer</code> 사용</td>
      <td><code class="language-plaintext highlighter-rouge">ModelContainer</code> 사용</td>
    </tr>
    <tr>
      <td><strong>데이터 컨텍스트</strong></td>
      <td><code class="language-plaintext highlighter-rouge">viewContext</code> 사용</td>
      <td><code class="language-plaintext highlighter-rouge">mainContext</code> 사용</td>
    </tr>
    <tr>
      <td><strong>컨테이너 초기화</strong></td>
      <td><code class="language-plaintext highlighter-rouge">loadPersistentStores()</code>로 로드</td>
      <td><code class="language-plaintext highlighter-rouge">try! ModelContainer()</code>로 간단히 초기화</td>
    </tr>
    <tr>
      <td><strong>메모리 저장 옵션</strong></td>
      <td>메모리 전용 옵션 없음</td>
      <td><code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly</code> 옵션 지원</td>
    </tr>
    <tr>
      <td><strong>Fetch 요청</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSFetchRequest</code> 사용</td>
      <td><code class="language-plaintext highlighter-rouge">FetchDescriptor</code> 사용</td>
    </tr>
    <tr>
      <td><strong>데이터 삽입</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSManagedObject</code> 인스턴스 생성 후 삽입</td>
      <td>Swift 구조체 인스턴스를 생성 후 삽입</td>
    </tr>
    <tr>
      <td><strong>데이터 삭제</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code> 등을 사용하여 삭제</td>
      <td><code class="language-plaintext highlighter-rouge">modelContext.delete()</code> 메서드 사용</td>
    </tr>
    <tr>
      <td><strong>저장 방식</strong></td>
      <td>SQLite 데이터베이스 (<code class="language-plaintext highlighter-rouge">.sqlite</code>) 파일로 저장</td>
      <td>SQLite 데이터베이스 (<code class="language-plaintext highlighter-rouge">.store</code>) 파일로 저장</td>
    </tr>
    <tr>
      <td><strong>모델 정의 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일에서 엔티티 정의</td>
      <td>Swift 구조체 및 <code class="language-plaintext highlighter-rouge">@Model</code> 어노테이션 사용</td>
    </tr>
    <tr>
      <td><strong>SwiftUI 통합</strong></td>
      <td>ObservableObject로 사용 가능하지만 별도 설정 필요</td>
      <td>SwiftData는 SwiftUI와 원활하게 통합됨</td>
    </tr>
  </tbody>
</table></div>

<p>위의 표는 GPT에게 viewmodel로 만든 코드를 비교하여 정리를 해달라고 한것이다.</p>

<h3 id="1-모델링-3"><span class="me-2">1. 모델링</span><a href="#1-모델링-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>CoreData는 CoreData를 사용하기위한 별도의 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code>파일 생성이 필요하다.</p>

<p><a href="https://github.com/user-attachments/assets/cde56b90-e84a-4936-9f80-4031b44642c2" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/cde56b90-e84a-4936-9f80-4031b44642c2" alt="CleanShot 2024-11-15 at 00 07 18" loading="lazy"></a></p>

<p>그리고 그에따른 Model를 만들어줘야한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">CartModel</span><span class="p">:</span> <span class="kt">Identifiable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>하지만 SwiftData는 파일을 만들 필요가 없고,</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">SwiftData</span>

<span class="kd">@Model</span>
<span class="kd">class</span> <span class="kt">SDCartModel</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">price</span><span class="p">:</span> <span class="kt">Double</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">id</span>
        <span class="k">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="k">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 모델링을 해주는것만으로도 해결이 된다.</p>

<h4 id="정리"><span class="me-2">정리</span><a href="#정리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>CoreData와 SwiftData의 모델 정의 방식의 차이를 아래 표로 정리함. CoreData는 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일이 필요하지만, SwiftData는 Swift 코드 내에서 직접 모델을 정의할 수 있다.</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>항목</th>
      <th>CoreData</th>
      <th>SwiftData</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>모델 파일 필요 여부</strong></td>
      <td>별도의 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일 필요</td>
      <td>Swift 코드에서 직접 정의, 추가 파일 필요 없음</td>
    </tr>
    <tr>
      <td><strong>모델 정의 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code>에서 엔티티와 속성 정의</td>
      <td>Swift 클래스/구조체에 <code class="language-plaintext highlighter-rouge">@Model</code> 어노테이션 사용</td>
    </tr>
    <tr>
      <td><strong>초기화 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSManagedObject</code> 클래스 상속, <code class="language-plaintext highlighter-rouge">context</code> 필요</td>
      <td>일반 Swift 클래스, Swift 초기화 방식 사용</td>
    </tr>
    <tr>
      <td><strong>코드 간결성</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일과 코드로 분리됨</td>
      <td>Swift 코드만으로 정의 가능, 간결하고 직관적임</td>
    </tr>
    <tr>
      <td><strong>Swift 언어 특징 사용</strong></td>
      <td>Swift의 타입 안전성 및 구조체 사용 어려움</td>
      <td>Swift의 기본 타입과 초기화 메서드 사용 가능</td>
    </tr>
  </tbody>
</table></div>

<h5 id="부연-설명"><span class="me-2">부연 설명</span><a href="#부연-설명" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><strong>모델 파일 생성 필요 여부</strong>:
    <ul>
      <li><strong>CoreData</strong>는 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일을 통해 모델 구조를 시각적으로 정의함. 이 파일에서 모든 엔티티와 속성을 정의하고, 자동 생성된 <code class="language-plaintext highlighter-rouge">NSManagedObject</code> 서브클래스를 사용해야 함.</li>
      <li><strong>SwiftData</strong>는 별도의 모델 파일 없이, Swift 코드에서 직접 모델 정의가 가능함. 이를 통해 Swift 언어의 타입 안전성과 구조체 사용이 가능함.</li>
    </ul>
  </li>
  <li><strong>코드의 간결성</strong>:
    <ul>
      <li>CoreData는 모델 정의가 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일과 코드로 분리되어 있어, 코드 간결성이 떨어지고, 변경 시 파일과 코드 모두 수정해야 함.</li>
      <li>SwiftData는 코드 내에서 모든 모델 정의가 가능해, 코드가 더 직관적이고 간결함.</li>
    </ul>
  </li>
  <li><strong>초기화 방식</strong>:
    <ul>
      <li>CoreData는 <code class="language-plaintext highlighter-rouge">context</code>를 필요로 하는 <code class="language-plaintext highlighter-rouge">NSManagedObject</code> 초기화 방식을 사용함.</li>
      <li>SwiftData는 일반 Swift 클래스의 초기화 방식을 따르며, <code class="language-plaintext highlighter-rouge">context</code>를 명시할 필요가 없음.</li>
    </ul>
  </li>
</ol>

<h5 id="결론"><span class="me-2">결론</span><a href="#결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li><strong>CoreData</strong>는 전통적인 방식으로, 시각적인 모델링과 복잡한 설정이 필요할 때 유리함.</li>
  <li><strong>SwiftData</strong>는 최신 Swift 언어의 특징을 잘 반영하고 있으며, 더 간단하고 간결한 코드로 정의 가능함.</li>
</ul>

<p>이건 GPT를 통해 정리를 해준내용.</p>

<h3 id="2-container"><span class="me-2">2. Container</span><a href="#2-container" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>우선 Container 생성을 할때 CoreData는 xcdatamodeld 파일을 만들고 거기 안에 있는 Entity의 명을 제대로 적어 줘야한다.</p>

<p><a href="https://github.com/user-attachments/assets/bfed402e-5449-4b02-9fe5-82a8ca56f1c5" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/bfed402e-5449-4b02-9fe5-82a8ca56f1c5" alt="CleanShot 2024-11-16 at 12 57 07" loading="lazy"></a></p>

<p>하지만 SwiftData는 우리가 만든 데이터 모델을이 들어간다.</p>

<p>그리고 메모리 저장을 할지 말지(<code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly</code>)에 대한 차이가 가장 크다.</p>

<p>저장되는 파일이 조금 다르다.</p>

<p><a href="https://github.com/user-attachments/assets/3cd42179-3460-4f50-929b-d5b6cf3badad" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/3cd42179-3460-4f50-929b-d5b6cf3badad" alt="CleanShot 2024-11-16 at 12 59 07" loading="lazy"></a></p>

<p>CoreData는 <code class="language-plaintext highlighter-rouge">.sqlite</code>이고 SwiftData는 <code class="language-plaintext highlighter-rouge">.store</code>파일이다.</p>

<p>물론 두개다 Viewer 프로그램을 통해 확인이 가능하다.</p>

<h4 id="정리-1"><span class="me-2">정리</span><a href="#정리-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>항목</th>
      <th>CoreData</th>
      <th>SwiftData</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>모델 정의 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일 필요, 엔티티 이름을 지정</td>
      <td>Swift 클래스/구조체를 직접 지정 (<code class="language-plaintext highlighter-rouge">@Model</code>)</td>
    </tr>
    <tr>
      <td><strong>초기화 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSPersistentContainer</code>와 <code class="language-plaintext highlighter-rouge">loadPersistentStores()</code> 사용</td>
      <td><code class="language-plaintext highlighter-rouge">try! ModelContainer()</code>로 간단하게 초기화</td>
    </tr>
    <tr>
      <td><strong>메모리 저장 옵션</strong></td>
      <td>메모리 전용 저장 옵션 없음</td>
      <td><code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly</code> 옵션 지원</td>
    </tr>
    <tr>
      <td><strong>저장 파일 확장자</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.sqlite</code> (<code class="language-plaintext highlighter-rouge">Model.sqlite</code>)</td>
      <td><code class="language-plaintext highlighter-rouge">.store</code> (<code class="language-plaintext highlighter-rouge">default.store</code>)</td>
    </tr>
    <tr>
      <td><strong>파일 뷰어 프로그램</strong></td>
      <td><code class="language-plaintext highlighter-rouge">.sqlite</code> 파일은 SQLite Viewer로 확인 가능</td>
      <td><code class="language-plaintext highlighter-rouge">.store</code> 파일도 SQLite Viewer로 확인 가능</td>
    </tr>
  </tbody>
</table></div>

<h5 id="부연-설명-1"><span class="me-2">부연 설명</span><a href="#부연-설명-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><strong>모델 정의 방식</strong>:
    <ul>
      <li><strong>CoreData</strong>는 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일을 생성하고, 그 안에 엔티티(Entity)와 속성을 정의함. 컨테이너 초기화 시 <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일 이름을 정확히 지정해야 함.</li>
      <li><strong>SwiftData</strong>는 Swift 코드 내에서 직접 데이터 모델을 정의하며, <code class="language-plaintext highlighter-rouge">@Model</code> 어노테이션을 사용해 Swift 구조체나 클래스를 모델로 지정함.</li>
    </ul>
  </li>
  <li><strong>메모리 저장 옵션</strong>:
    <ul>
      <li><strong>CoreData</strong>는 메모리 전용 저장소 옵션이 없고, 기본적으로 디스크에 데이터를 저장함.</li>
      <li><strong>SwiftData</strong>는 <code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly: true</code> 옵션을 통해 데이터를 메모리에만 저장할 수 있음. 이는 테스트나 임시 데이터 처리 시 유리함.</li>
    </ul>
  </li>
  <li><strong>저장 파일 확장자</strong>:
    <ul>
      <li><strong>CoreData</strong>는 SQLite 형식의 데이터베이스를 사용하며, 저장 파일의 확장자는 <code class="language-plaintext highlighter-rouge">.sqlite</code>임 (<code class="language-plaintext highlighter-rouge">Model.sqlite</code>).</li>
      <li><strong>SwiftData</strong>는 <code class="language-plaintext highlighter-rouge">.store</code> 확장자를 사용하며 (<code class="language-plaintext highlighter-rouge">default.store</code>), 더 간단한 파일 형식을 사용함.</li>
    </ul>
  </li>
  <li><strong>파일 뷰어 프로그램</strong>:
    <ul>
      <li>두 파일 모두 SQLite 형식이기 때문에, <strong>DB Browser for SQLite</strong>나 <strong>SQLiteStudio</strong> 같은 뷰어 프로그램에서 확인 가능함.</li>
    </ul>
  </li>
</ol>

<h5 id="결론-1"><span class="me-2">결론</span><a href="#결론-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li><strong>CoreData</strong>는 전통적인 방식으로, <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일과 SQLite 데이터베이스(<code class="language-plaintext highlighter-rouge">.sqlite</code>)를 사용함. 더 많은 설정이 필요하지만, 복잡한 데이터 모델링에 유리함.</li>
  <li><strong>SwiftData</strong>는 간단하고 현대적인 방식으로, Swift 코드에서 직접 모델을 정의하며, 메모리 전용 옵션과 간단한 초기화 방식이 특징임. 더 간결하고 Swift 언어의 특성을 잘 살리고 있음.</li>
</ul>

<p>위에 Total로 정리한것이랑 중복은 있을것이다. GPT를 통해 정리를 해달라고 했기때문</p>

<h3 id="3-context"><span class="me-2">3. Context</span><a href="#3-context" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>CoreData나 SwiftData 모두 Context를 통해 CRUD를 적용하게된다.</p>

<p>CoreData는 <code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>이다.</p>

<p>SwiftData는 <code class="language-plaintext highlighter-rouge">ModelContext</code>이다.</p>

<h4 id="정리-2"><span class="me-2">정리</span><a href="#정리-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>CoreData와 SwiftData 모두 <strong>Context</strong>를 사용해 <strong>CRUD (Create, Read, Update, Delete)</strong> 작업을 수행함. CoreData는 <code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>를 사용하고, SwiftData는 <code class="language-plaintext highlighter-rouge">ModelContext</code>를 사용함. 전체 데이터를 삭제할 때 CoreData는 <code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code>와 <code class="language-plaintext highlighter-rouge">execute()</code> 메서드를 사용하며, SwiftData는 <code class="language-plaintext highlighter-rouge">delete(model:)</code> 메서드를 사용함.</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>항목</th>
      <th>CoreData (<code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>)</th>
      <th>SwiftData (<code class="language-plaintext highlighter-rouge">ModelContext</code>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Context 타입</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code></td>
      <td><code class="language-plaintext highlighter-rouge">ModelContext</code></td>
    </tr>
    <tr>
      <td><strong>데이터 삽입 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">insert(_:)</code> 메서드로 <code class="language-plaintext highlighter-rouge">NSManagedObject</code> 삽입</td>
      <td><code class="language-plaintext highlighter-rouge">insert(_:)</code> 메서드로 Swift 구조체 삽입</td>
    </tr>
    <tr>
      <td><strong>데이터 저장 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">save()</code> 메서드 호출</td>
      <td><code class="language-plaintext highlighter-rouge">save()</code> 메서드 호출</td>
    </tr>
    <tr>
      <td><strong>데이터 삭제 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">delete(_:)</code> 메서드 호출</td>
      <td><code class="language-plaintext highlighter-rouge">delete(_:)</code> 메서드 호출</td>
    </tr>
    <tr>
      <td><strong>Fetch 요청</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSFetchRequest</code> 사용</td>
      <td><code class="language-plaintext highlighter-rouge">FetchDescriptor</code> 사용</td>
    </tr>
    <tr>
      <td><strong>전체 삭제 방식</strong></td>
      <td><code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code>와 <code class="language-plaintext highlighter-rouge">execute()</code> 메서드 사용</td>
      <td><code class="language-plaintext highlighter-rouge">delete(model:)</code> 메서드 사용</td>
    </tr>
  </tbody>
</table></div>

<h5 id="부연-설명-2"><span class="me-2">부연 설명</span><a href="#부연-설명-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><strong>Context 역할</strong>:
    <ul>
      <li><strong>Context</strong>는 데이터의 <strong>일시적인 작업 공간</strong>으로, 메모리에 로드된 데이터를 관리하고, 변경 사항을 추적함. 변경된 데이터를 저장(<code class="language-plaintext highlighter-rouge">save()</code>)하면 영구 저장소에 반영됨.</li>
    </ul>
  </li>
  <li><strong>CRUD 작업의 일관성</strong>:
    <ul>
      <li>CoreData와 SwiftData 모두 <code class="language-plaintext highlighter-rouge">Context</code>를 통해 데이터 삽입(<code class="language-plaintext highlighter-rouge">insert</code>), 삭제(<code class="language-plaintext highlighter-rouge">delete</code>), 저장(<code class="language-plaintext highlighter-rouge">save</code>) 작업을 수행함.</li>
      <li>CoreData의 <code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>는 <code class="language-plaintext highlighter-rouge">NSManagedObject</code>를 사용해 데이터를 관리함.</li>
      <li>SwiftData의 <code class="language-plaintext highlighter-rouge">ModelContext</code>는 Swift 구조체나 클래스를 직접 관리하므로, 타입 안전성이 높고 더 간결함.</li>
    </ul>
  </li>
  <li><strong>전체 데이터 삭제 방식</strong>:
    <ul>
      <li><strong>CoreData</strong>는 <code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code>를 사용해 전체 데이터를 삭제함. <code class="language-plaintext highlighter-rouge">NSFetchRequest</code>로 엔티티를 지정하고, 이를 기반으로 <code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code> 객체를 생성함. 이후 <code class="language-plaintext highlighter-rouge">execute()</code> 메서드를 호출해 요청을 실행함.</li>
      <li><strong>SwiftData</strong>는 <code class="language-plaintext highlighter-rouge">delete(model:)</code> 메서드를 사용해 간단하게 전체 데이터를 삭제할 수 있음. 모델(<code class="language-plaintext highlighter-rouge">SDCartModel.self</code>)만 지정하면 되므로 코드가 더 간결함.</li>
    </ul>
  </li>
  <li><strong>SwiftUI와의 통합</strong>:
    <ul>
      <li>SwiftData의 <code class="language-plaintext highlighter-rouge">ModelContext</code>는 SwiftUI의 <code class="language-plaintext highlighter-rouge">@Environment</code>에서 직접 접근할 수 있어, SwiftUI와의 통합이 더 쉬움 (<code class="language-plaintext highlighter-rouge">@Environment(\.modelContext)</code>).</li>
      <li>CoreData의 <code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>도 SwiftUI와 통합할 수 있지만, <code class="language-plaintext highlighter-rouge">@Environment(\.managedObjectContext)</code>를 통해 접근해야 하며, 추가적인 설정이 필요할 수 있음.</li>
    </ul>
  </li>
</ol>

<h5 id="결론-2"><span class="me-2">결론</span><a href="#결론-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li><strong>CoreData</strong>는 전통적인 데이터 관리 프레임워크로, <code class="language-plaintext highlighter-rouge">NSManagedObjectContext</code>를 사용하여 다양한 고급 기능을 제공함. 특히, <strong><code class="language-plaintext highlighter-rouge">NSBatchDeleteRequest</code></strong>와 같은 기능을 통해 대규모 데이터 삭제 시 성능 최적화를 할 수 있음. 그러나 초기 설정이 복잡하고, <code class="language-plaintext highlighter-rouge">.xcdatamodeld</code> 파일 관리 및 복잡한 API 사용으로 인해 코드가 길어질 수 있음.</li>
  <li><strong>SwiftData</strong>는 현대적인 Swift 기반의 데이터 관리 프레임워크로, <code class="language-plaintext highlighter-rouge">ModelContext</code>를 사용하여 더 간결하고 타입 안전한 코드 작성을 가능하게 함. 간단한 <strong><code class="language-plaintext highlighter-rouge">delete(model:)</code></strong> 메서드를 통해 전체 데이터를 삭제할 수 있으며, SwiftUI와의 자연스러운 통합으로 인해 최신 SwiftUI 프로젝트에서 사용하기 적합함.</li>
  <li>SwiftData는 Swift의 기본 타입과 구조체를 직접 사용할 수 있어, 코드의 간결성 및 유지보수성이 높음. 특히, 메모리 전용 옵션(<code class="language-plaintext highlighter-rouge">isStoredInMemoryOnly</code>)은 테스트 환경에서 유리하며, SwiftUI 환경에서의 개발 생산성을 크게 향상시킴.</li>
</ul>

<p>따라서:</p>
<ul>
  <li>복잡한 데이터 모델과 고급 기능이 필요한 경우에는 <strong>CoreData</strong>가 적합함.</li>
  <li>간결한 코드, SwiftUI와의 높은 호환성, 그리고 타입 안전성을 중시하는 경우에는 <strong>SwiftData</strong>가 더 적합함.</li>
</ul>

<h2 id="10-문제-해결"><span class="me-2">10. 문제 해결</span><a href="#10-문제-해결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>크게 3가지 문제가 파악이 되었다.</p>

<h3 id="1-중복-문제"><span class="me-2">1. 중복 문제</span><a href="#1-중복-문제" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">checkDuplicate</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">cart</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="nv">where</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="n">title</span> <span class="p">})</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>다음과 같이 중복확인을 하는 함수를 만들어 주었다.</p>

<p>이걸 통해 true / false 체크하여 Alert를 띄우도록 한다.</p>

<p>그리고 Alert를 띄우기 위해 Button을 약간 수정한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kd">@State</span> <span class="k">var</span> <span class="nv">isDuplicated</span> <span class="o">=</span> <span class="kc">false</span>

<span class="kt">Button</span> <span class="p">{</span>
        <span class="n">isDuplicated</span> <span class="o">=</span> <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">checkDuplicate</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">isDuplicated</span><span class="p">)</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">isDuplicated</span> <span class="p">{</span>
            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
        <span class="p">}</span>
        
    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="s">"추가"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.45</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="nf">alert</span><span class="p">(</span><span class="nv">isPresented</span><span class="p">:</span> <span class="n">$isDuplicated</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">Alert</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"중복 확인"</span><span class="p">),</span>
                <span class="nv">message</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"이미 장바구니에 있습니다."</span><span class="p">))</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>하지만 계속 false가 뜨는 문제가 발생.</p>

<p>print를 해보니</p>

<p><code class="language-plaintext highlighter-rouge">Optional("Knoll Saarinen Executive Conference Chair")</code> 옵셔널이어서 타입이 달라서 그런건가? 라는 생각이 들어서 옵셔널 바인딩을 해보았으나 실패.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="k">let</span> <span class="nv">checkTitle</span> <span class="o">=</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span> <span class="p">{</span>
                        <span class="n">isDuplicated</span> <span class="o">=</span> <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">checkDuplicate</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">checkTitle</span><span class="p">)</span>
                        <span class="nf">print</span><span class="p">(</span><span class="n">isDuplicated</span><span class="p">)</span>
                        <span class="k">if</span> <span class="o">!</span><span class="n">isDuplicated</span> <span class="p">{</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nf">print</span><span class="p">(</span><span class="s">"Title does not exist"</span><span class="p">)</span>
                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>일단 이건 그대로 두는걸로.</p>

<p><code class="language-plaintext highlighter-rouge">print(cart.map { $0.title ?? "" })</code>를 해본결과</p>

<p>담기를 했지만 CartViewModel의 cart가 업데이트가 되지 않아서 생긴 문제였다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">WishModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="kt">Cart</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="p">)</span>
        <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kt">Int64</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">title</span>
        <span class="n">item</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">price</span>
        
        <span class="nf">saveData</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">saveData</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="n">viewContext</span><span class="o">.</span><span class="nf">save</span><span class="p">()</span>
            <span class="nf">fetchRequest</span><span class="p">()</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Save failed: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>추가할때마다 fetchRequest()를 실행하게 해주었다.</p>

<p>아무래도 데이터가 변화가 있을때마다 save와 fetch를 둘다 해야하는듯 하다.</p>

<p>생각해보니 이전에는 배열에 직접 넣어줬기에 관리가 되었는데 지금은 그렇지 않다.</p>

<p>계속 fetchRequest를 하는건 그렇게 좋아보이지는 않는듯하다.</p>

<p>근본적인 방법을 좀 바꿔야할 필요가 있어보인다.</p>

<p>일단은 fetchRequest()를 호출하는 식으로 변경</p>

<h3 id="2-coredata-warning"><span class="me-2">2. CoreData Warning</span><a href="#2-coredata-warning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-text highlighter-rouge"><div class="code-header">
        <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>CoreData: error: +[Cart entity] Failed to find a unique match for an NSEntityDescription to a managed object subclass
</pre></td></tr></tbody></table></code></div></div>

<p>아마 이것도 init과 연관이 좀 있어보이는듯 하다.</p>

<p>ViewModel이 메모리가 다른데 CoreData를 공유하기에 발생했던 문제, 즉 init이 여러번 이루어 졌다.</p>

<p>3-2의 문제를 해결하면서 해소. (역시 맞았다.)</p>

<h3 id="3-전체-삭제-문제-cartview"><span class="me-2">3. 전체 삭제 문제 (CartView)</span><a href="#3-전체-삭제-문제-cartview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>현재 2가지 문제가 있다.</p>

<h4 id="1-전체-삭제-후-ui-update-안됨"><span class="me-2">1. 전체 삭제 후 UI Update 안됨</span><a href="#1-전체-삭제-후-ui-update-안됨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>CartView에서 전체 삭제를 하게되면 view가 업데이트 되지 않는 문제가 있다.</p>

<p><a href="https://github.com/user-attachments/assets/3f8268f9-4e6b-4778-aa9f-24dde66be119" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/3f8268f9-4e6b-4778-aa9f-24dde66be119" alt="Nov-15-2024 06-19-26" width="50%" height="50%" loading="lazy"></a></p>

<p>2번 문제를 해결 하면서 자연스럽게 해결.</p>

<h4 id="2-카트에-담고-전체삭제후-다시-담을경우-중복-에러-발생"><span class="me-2">2. 카트에 담고 전체삭제후 다시 담을경우 중복 에러 발생</span><a href="#2-카트에-담고-전체삭제후-다시-담을경우-중복-에러-발생" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>장바구니를 비웠으나 아무래도 배열에 대해 초기화가 되지않아서 생기는 문제로 보인다.</p>

<p><a href="https://github.com/user-attachments/assets/71725553-7b13-4b08-a50e-9bfddb948ef0" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/71725553-7b13-4b08-a50e-9bfddb948ef0" alt="Nov-15-2024 06-20-17" width="50%" height="50%" loading="lazy"></a></p>

<p>삭제하는 함수에 <code class="language-plaintext highlighter-rouge">print(cart.map { $0.title ?? "" })</code>이걸 다시 넣어서 배열을 확인해봐야할듯하다.</p>

<p>배열은 [] 이렇게 빈걸로 나온다.</p>

<p>아무래도 한번 추가를 하고나면 true로 바뀌어서 그런걸로 보인다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="k">let</span> <span class="nv">checkTitle</span> <span class="o">=</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">title</span> <span class="p">{</span>
                        <span class="n">isDuplicated</span> <span class="o">=</span> <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">checkDuplicate</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">checkTitle</span><span class="p">)</span>
                        <span class="k">if</span> <span class="o">!</span><span class="n">isDuplicated</span> <span class="p">{</span>
                            <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span><span class="o">!</span><span class="p">)</span>
                            <span class="n">isDuplicated</span> <span class="o">=</span> <span class="kc">false</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nf">print</span><span class="p">(</span><span class="s">"Title does not exist"</span><span class="p">)</span>
                    <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>추가하고 난뒤 false로 바꿔주기로 결정.</p>

<p>그래도 안된다.</p>

<p>onAppear에 print로 찍어봤지만 false가 뜬다.</p>

<p>문득 각 View 마다 cartViewModel을 인스턴스화 하는데, 그것도 혹시 영향이 있지 않을까라는 생각이 들어서 바꿔본다.</p>

<p>해결이 되었다.</p>

<p>원래는 모든 문제를 해결하고 이후에 하나로 바꿔줄 생각이었는데 이게 문제였다….</p>

<p>그러면서 자연스럽게 전체삭제후 UI가 바뀌지않던 부분도 해결</p>

<p>ViewModel에 대해 각각 CoreData를 공유하더라도 ViewModel이 서로 달랐기에 충돌이 일어나지 않았을까 싶다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c1">// MainView</span>
<span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span> 
<span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span> <span class="o">=</span> <span class="kt">WishViewModel</span><span class="p">()</span>

<span class="kt">Tab</span><span class="p">(</span><span class="s">"Display"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"eye"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">ItemView</span><span class="p">(</span><span class="nv">wishViewModel</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="p">,</span>
                                <span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="kt">Tab</span><span class="p">(</span><span class="s">"cart"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"cart"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">CartView</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                    <span class="p">}</span>

<span class="c1">// ItemView</span>
<span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>
<span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span><span class="p">:</span> <span class="kt">WishViewModel</span>

<span class="c1">// CartView</span>
<span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>
</pre></td></tr></tbody></table></code></div></div>

<p>지금은 MainView에서 ViewModel을 인스턴스화 해서 필요한 Item, CartView에 전달하는 식으로 바꾸었다.</p>

<h3 id="4-swipeaction시-발생하는-warning"><span class="me-2">4. SwipeAction시 발생하는 Warning</span><a href="#4-swipeaction시-발생하는-warning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-text highlighter-rouge"><div class="code-header">
        <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Attempted to invalidate swipe actions layout for invalid decoration index path: &lt;NSIndexPath: 0x8a8d70bf3cd24cb2&gt; {length = 2, path = 0 - 0}
</pre></td></tr></tbody></table></code></div></div>

<p>이런 경고가 뜬다.</p>

<p>확인해보니 List의 마지막을 지울때 발생하게 된다.</p>

<p>유효하지 않은 indexpath 에서 유효하지않은 swipeaction이 시도가 되었다는데,</p>

<p>뭔가 삭제하고나서도 swipeaction이 활성화가 되어있는지는 모르겠다.</p>

<p>그래서 삭제할때 Alert를 띄우면 어떨까 싶어서 해보려고한다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">isDelete</span> <span class="o">=</span> <span class="kc">false</span>
<span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">currentCartItem</span><span class="p">:</span> <span class="kt">Cart</span><span class="p">?</span>
    
<span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">VStack</span> <span class="p">{</span>
        <span class="kt">List</span> <span class="p">{</span>
            <span class="kt">ForEach</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">cart</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">cart</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="nf">dollarAdd</span><span class="p">())</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">swipeActions</span><span class="p">(</span><span class="nv">edge</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">Button</span> <span class="p">{</span>
                        <span class="n">currentCartItem</span> <span class="o">=</span> <span class="n">cart</span>
                        <span class="n">isDelete</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
                    <span class="p">}</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"trash"</span><span class="p">)</span>
                    <span class="p">}</span>
                    
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">alert</span><span class="p">(</span><span class="s">"항목 삭제"</span><span class="p">,</span> <span class="nv">isPresented</span><span class="p">:</span> <span class="n">$isDelete</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"삭제"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">destructive</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="n">currentCartItem</span> <span class="p">{</span>
                    <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteData</span><span class="p">(</span><span class="nv">object</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"취소"</span><span class="p">,</span> <span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">)</span> <span class="p">{}</span>
        <span class="p">}</span> <span class="nv">message</span><span class="p">:</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"이 항목을 삭제하시겠습니까?"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">fetchRequest</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/32c8ef86-bef2-4aaf-b137-cd5f75c93448" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/32c8ef86-bef2-4aaf-b137-cd5f75c93448" alt="Nov-15-2024 09-41-51" width="50%" height="50%" loading="lazy"></a></p>

<p>Warning이 더이상 뜨지 않는다.</p>

<p>끝.</p>

<p>검색해도 내용이 없어서 GPT에게 물어봤다.</p>

<h4 id="alert를-사용했을-때-문제가-해결되는-이유"><span class="me-2">Alert를 사용했을 때 문제가 해결되는 이유</span><a href="#alert를-사용했을-때-문제가-해결되는-이유" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>SwiftUI에서 Alert를 사용하면 스와이프 액션 관련 문제가 해결되는 이유는 <strong>상태 관리와 이벤트 흐름</strong>에 있다. Alert는 SwiftUI에서 <strong>비동기적인 UI 업데이트 문제를 해결</strong>하고, <strong>스와이프 액션이 남아 있는 상태</strong>를 정상적으로 종료시킨다.</p>

<h5 id="문제의-원인"><span class="me-2">문제의 원인</span><a href="#문제의-원인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><strong>스와이프 액션이 활성화된 상태에서 데이터 삭제</strong>
    <ul>
      <li>사용자가 셀을 스와이프한 후, 삭제 버튼을 누르기 전까지 <strong>스와이프 액션이 활성화된 상태로 남아 있다</strong>.</li>
      <li>이 상태에서 데이터를 삭제하면, SwiftUI는 <strong>스와이프 액션이 완료되지 않은 상태에서 셀을 제거하려고 시도</strong>하게 된다.</li>
      <li>결과적으로 <strong>비정상적인 인덱스 참조 문제</strong>가 발생할 수 있다.</li>
    </ul>
  </li>
  <li><strong>SwiftUI의 비동기 UI 업데이트 문제</strong>
    <ul>
      <li>Core Data에서 데이터를 삭제하면, 데이터 소스는 <strong>즉시 업데이트</strong>된다.</li>
      <li>그러나 SwiftUI의 <code class="language-plaintext highlighter-rouge">List</code> 뷰는 <strong>UI 업데이트와 스와이프 액션 종료 사이에 시간 차이</strong>가 있을 수 있다.</li>
      <li>특히 <strong>마지막 셀을 삭제할 때</strong> 문제가 더 자주 발생한다.</li>
    </ul>
  </li>
</ol>

<h5 id="alert가-문제를-해결하는-이유"><span class="me-2">Alert가 문제를 해결하는 이유</span><a href="#alert가-문제를-해결하는-이유" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><strong>스와이프 액션 종료</strong>
    <ul>
      <li>Alert가 표시되면 SwiftUI는 <strong>현재 활성화된 스와이프 액션을 종료</strong>한다.</li>
      <li>SwiftUI는 Alert가 표시되는 동안 <strong>사용자 인터랙션을 차단</strong>하고, 스와이프 액션이 비활성화된다.</li>
      <li>이를 통해, <strong>스와이프 액션이 남아 있는 문제</strong>가 방지된다.</li>
    </ul>
  </li>
  <li><strong>UI 업데이트 타이밍 안정화</strong>
    <ul>
      <li>Alert가 표시되면서 SwiftUI는 <strong>UI 업데이트 흐름을 차단</strong>하고, 데이터가 안전하게 변경될 시간을 제공한다.</li>
      <li>사용자가 Alert에서 “삭제”를 선택하면, 이 시점에서 SwiftUI는 <strong>안정된 상태에서 데이터를 업데이트</strong>할 수 있다.</li>
      <li>이로 인해 <code class="language-plaintext highlighter-rouge">List</code> 뷰와 데이터 소스 간의 불일치 문제가 해결된다.</li>
    </ul>
  </li>
</ol>

<hr />

<h4 id="결론-3"><span class="me-2">결론</span><a href="#결론-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li>Alert는 <strong>스와이프 액션을 종료하고</strong>, SwiftUI가 안정적인 상태에서 <strong>UI 업데이트를 수행</strong>할 수 있도록 돕는다.</li>
  <li>Alert가 표시되면서 <strong>사용자 인터랙션이 차단</strong>되고, 스와이프 액션도 정상적으로 종료된다.</li>
  <li>이를 통해 <strong>비동기 UI 업데이트 문제</strong>와 <strong>데이터 간 불일치 문제</strong>가 해결된다.</li>
</ul>

<h2 id="11-테스트"><span class="me-2">11. 테스트</span><a href="#11-테스트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>여기서 말하는 테스트는 글을 작성하면서 제일 처음에 적었던</p>

<p><code class="language-plaintext highlighter-rouge">@ObservableObject, @StateObject</code> 이것에 대해서 해보려고한다.</p>

<p>이 앱을 하려고한건</p>

<p>처음 생각은 이랬다.</p>

<blockquote>
  <p>화면하나에 api를 호출하는게 있고 위에 장바구니 초기화 버튼이 있다.</p>
  <blockquote>
    <p>api조회를 한 결과가 화면에 있고 장바구니 초기화를 눌렀을때 api결과가 그대로인상태에서 장바구니가 초기화되면 stateobject
api조회를 한 결과가 화면에 있고 장바구니 초기화를 눌렀을때 api결과가 초기화되고 장바구니가 초기화되면 observedobject</p>
  </blockquote>
</blockquote>

<p>이런 개념으로 좀 테스트를 해보려고 한것이었다.</p>

<p>근데 만들다보니 장바구니 초기화를 하면서 view의 변화가 없다.</p>

<p>원래 의도는 장바구니를 초기화하게되었을때 api도 초기화 되면서 새롭게 리로드를 하는걸 상상했는데</p>

<p>구현하다보니 의도와 다르게 코드가 작성이 되어버렸다.</p>

<p>새롭게 뷰를 만들어서 진행한다.</p>

<p>그동안 긴글 작성하느라 지쳐서 GPT한테 기본적인 틀을 만들어 달라고 한뒤, 세부적인 것을 계속 손봤다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"TestView - API 조회 및 장바구니 테스트"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// 독립적인 API 조회 뷰</span>
            <span class="kt">ApiDataSubview</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
            <span class="c1">// 독립적인 장바구니 조작 뷰</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ApiDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="c1">//@ObservedObject var testWishViewModel = TestWishViewModel()</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">testWishViewModel</span> <span class="o">=</span> <span class="kt">TestWishViewModel</span><span class="p">()</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"API 조회 결과"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// API 데이터 리스트</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">testWishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// API 조회 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">testWishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">border</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이게 최종적으로 만들어진 코드.</p>

<p>여러 시행착오가 있었다.</p>

<h3 id="시행착오"><span class="me-2">시행착오</span><a href="#시행착오" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="1-mainview--testview-로-viewmodel-전달"><span class="me-2">1. MainView → TestView 로 ViewModel 전달</span><a href="#1-mainview--testview-로-viewmodel-전달" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="rouge-code"><pre><span class="c1">// MainView</span>
<span class="kt">Tab</span><span class="p">(</span><span class="s">"Test"</span><span class="p">,</span> <span class="nv">systemImage</span><span class="p">:</span> <span class="s">"star"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">TestView</span><span class="p">(</span><span class="nv">wishViewModel</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="p">,</span>
                             <span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                <span class="p">}</span>

<span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span><span class="p">:</span> <span class="kt">WishViewModel</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"TestView - API 조회 및 장바구니 테스트"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// API 데이터 표시 및 추가 버튼</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// API 조회 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>

            <span class="c1">// 장바구니 초기화 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>

            <span class="c1">// 장바구니 데이터 표시</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="kt">Task</span> <span class="p">{</span>
                <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>실패.</p>

<p><a href="https://github.com/user-attachments/assets/910afdf8-25ab-4924-a2e6-ff13a7fe446b" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/910afdf8-25ab-4924-a2e6-ff13a7fe446b" alt="Nov-15-2024 11-23-37" width="50%" height="50%" loading="lazy"></a></p>

<p>변화가 없음.</p>

<h4 id="2-testview에서-자체-instance-생성"><span class="me-2">2. TestView에서 자체 Instance 생성</span><a href="#2-testview에서-자체-instance-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span> <span class="o">=</span> <span class="kt">WishViewModel</span><span class="p">()</span> <span class="c1">// 독립적인 인스턴스 생성</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span> <span class="c1">// 독립적인 인스턴스 생성</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"TestView - 독립적인 뷰 모델 사용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// API 데이터 표시 및 장바구니 담기 버튼</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// API 조회 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>

            <span class="c1">// 장바구니 초기화 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>

            <span class="c1">// 장바구니 데이터 표시</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
            <span class="kt">Task</span> <span class="p">{</span>
                <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/d77d2488-42f7-4cf9-981f-75c254f8a034" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/d77d2488-42f7-4cf9-981f-75c254f8a034" alt="Nov-15-2024 11-26-23" width="50%" height="50%" loading="lazy"></a></p>

<p>결과는 상동.</p>

<h4 id="3-testview-강제-렌더링"><span class="me-2">3. TestView 강제 렌더링</span><a href="#3-testview-강제-렌더링" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">forceRefreshId</span> <span class="o">=</span> <span class="kt">UUID</span><span class="p">()</span> <span class="c1">// 뷰의 강제 재생성을 위한 ID</span>

<span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">VStack</span> <span class="p">{</span>
        <span class="kt">Button</span><span class="p">(</span><span class="s">"TestView 강제 초기화"</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">forceRefreshId</span> <span class="o">=</span> <span class="kt">UUID</span><span class="p">()</span> <span class="c1">// 새로운 UUID로 업데이트하여 뷰를 강제 초기화</span>
        <span class="p">}</span>
        <span class="kt">TestView</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">id</span><span class="p">(</span><span class="n">forceRefreshId</span><span class="p">)</span> <span class="c1">// ID가 변경되면 뷰가 강제로 재생성됨</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이건 뷰를 새롭게 렌더링하면서 인스턴스를 새로 생성하는것.</p>

<p>이건 새롭게 렌더링 하면서 onAppear를 통해 새롭게 렌더링을 하므로</p>

<p>wrapper와 상관없이 API결과가 계속 달라진다.</p>

<p><a href="https://github.com/user-attachments/assets/d7425f9f-3e48-4e87-8653-832d660c6128" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/d7425f9f-3e48-4e87-8653-832d660c6128" alt="Nov-15-2024 11-34-07" width="50%" height="50%" loading="lazy"></a></p>

<p>그래서 onAppear를 빼보았다.</p>

<p><a href="https://github.com/user-attachments/assets/3cc54700-62b7-4257-b849-d880f59ea96e" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/3cc54700-62b7-4257-b849-d880f59ea96e" alt="Nov-15-2024 11-35-36" width="50%" height="50%" loading="lazy"></a></p>

<p>조회 결과가 사라진다.</p>

<p>왜냐 새롭게 뷰가 렌더링 되었지만 fetch를 하지 않았기 때문.</p>

<h4 id="4-이전에-참고했던-글과-유사한-방식으로-재시도"><span class="me-2">4. 이전에 참고했던 글과 유사한 방식으로 재시도</span><a href="#4-이전에-참고했던-글과-유사한-방식으로-재시도" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>RandomNumberView의 자식뷰로 CounterView가 있었던걸 생각해서 그렇게 구현을 해보았다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="c1">//@StateObject var wishViewModel = WishViewModel() // 테스트 1: 유지되는 경우</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span> <span class="o">=</span> <span class="kt">WishViewModel</span><span class="p">()</span> <span class="c1">// 테스트 2: 초기화되는 경우</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"TestView - API 조회 및 장바구니 테스트"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// 독립적인 API 조회 뷰</span>
            <span class="kt">ApiDataSubview</span><span class="p">(</span><span class="nv">wishViewModel</span><span class="p">:</span> <span class="n">wishViewModel</span><span class="p">)</span>

            <span class="c1">// 독립적인 장바구니 조작 뷰</span>
            <span class="kt">CartDataSubview</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ApiDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">wishViewModel</span><span class="p">:</span> <span class="kt">WishViewModel</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"API 조회 결과"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// API 데이터 리스트</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">wishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// API 조회 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">wishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">border</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">CartDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">border</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/7761daff-739d-4016-8f96-a9689f906610" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/7761daff-739d-4016-8f96-a9689f906610" alt="Nov-15-2024 12-00-35" width="50%" height="50%" loading="lazy"></a></p>

<p>영향이 없다.</p>

<h4 id="5-cartdatasubview를-제거-최종"><span class="me-2">5. CartDataSubView를 제거 (최종)</span><a href="#5-cartdatasubview를-제거-최종" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<h5 id="1-testview"><span class="me-2">1. <strong><code class="language-plaintext highlighter-rouge">TestView</code></strong></span><a href="#1-testview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">@ObservedObject var cartViewModel = CartViewModel()</code>으로 선언하여 <strong>CartViewModel</strong> 인스턴스는 <code class="language-plaintext highlighter-rouge">TestView</code>에서 직접 생성.</li>
  <li><code class="language-plaintext highlighter-rouge">ApiDataSubview</code>와 독립적인 <strong>장바구니 데이터를 표시</strong>하는 UI로 구성.</li>
  <li>“장바구니 초기화” 버튼을 통해 장바구니 데이터를 삭제.</li>
</ul>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"TestView - API 조회 및 장바구니 테스트"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// 독립적인 API 조회 뷰</span>
            <span class="kt">ApiDataSubview</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
            <span class="c1">// 독립적인 장바구니 조작 뷰</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h5 id="2-apidatasubview"><span class="me-2">2. <strong><code class="language-plaintext highlighter-rouge">ApiDataSubview</code></strong></span><a href="#2-apidatasubview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">@StateObject var testWishViewModel = TestWishViewModel()</code>으로 선언하여 <strong>TestWishViewModel</strong> 인스턴스는 <code class="language-plaintext highlighter-rouge">ApiDataSubview</code>에서 직접 생성.</li>
  <li><strong>API 조회 결과</strong>를 표시하고, “담기” 버튼을 통해 장바구니에 아이템을 추가.</li>
  <li><code class="language-plaintext highlighter-rouge">@StateObject</code>를 사용함으로써, <strong><code class="language-plaintext highlighter-rouge">testWishViewModel</code> 인스턴스가 유지</strong>됨.</li>
</ul>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ApiDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="c1">//@ObservedObject var testWishViewModel = TestWishViewModel()</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">testWishViewModel</span> <span class="o">=</span> <span class="kt">TestWishViewModel</span><span class="p">()</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"API 조회 결과"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="c1">// API 데이터 리스트</span>
            <span class="kt">List</span><span class="p">(</span><span class="n">testWishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// API 조회 버튼</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">testWishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">border</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h5 id="-성공-요인"><span class="me-2">🏆 성공 요인</span><a href="#-성공-요인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>요인</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1. <strong><code class="language-plaintext highlighter-rouge">@StateObject</code> 사용</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ApiDataSubview</code>에서 <strong><code class="language-plaintext highlighter-rouge">@StateObject</code></strong>로 선언한 <code class="language-plaintext highlighter-rouge">testWishViewModel</code>은 인스턴스가 유지됨.</td>
    </tr>
    <tr>
      <td>2. <strong>독립적인 서브 뷰 구조</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ApiDataSubview</code>와 장바구니 표시 뷰를 <strong>독립적인 서브 뷰로 분리</strong>하여 각각의 상태를 독립적으로 관리.</td>
    </tr>
    <tr>
      <td>3. <strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code>로 전달된 인스턴스</strong></td>
      <td><code class="language-plaintext highlighter-rouge">CartViewModel</code>은 <code class="language-plaintext highlighter-rouge">TestView</code>에서 생성되어 <strong>재렌더링 시 초기화되지 않음</strong>.</td>
    </tr>
    <tr>
      <td>4. <strong>뷰의 생명주기 차이 확인 가능</strong></td>
      <td><code class="language-plaintext highlighter-rouge">@StateObject</code>는 <strong>뷰의 처음 생성 시 한 번만 초기화</strong>, <code class="language-plaintext highlighter-rouge">@ObservedObject</code>는 <strong>뷰가 재렌더링 시마다 초기화</strong>됨.</td>
    </tr>
  </tbody>
</table></div>

<hr />

<h5 id="-테스트-결과-비교"><span class="me-2">🎯 테스트 결과 비교</span><a href="#-테스트-결과-비교" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>선언 방식</th>
      <th><code class="language-plaintext highlighter-rouge">testWishViewModel</code> 초기화 여부</th>
      <th>API 조회 결과 유지 여부</th>
      <th>장바구니 데이터 유지 여부</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">@StateObject</code></td>
      <td>❌ (한 번만 초기화됨)</td>
      <td>✅ (유지됨)</td>
      <td>✅ (유지됨)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">@ObservedObject</code></td>
      <td>✅ (재렌더링 시 초기화됨)</td>
      <td>❌ (초기화됨)</td>
      <td>✅ (유지됨)</td>
    </tr>
  </tbody>
</table></div>

<hr />

<h5 id="결론-4"><span class="me-2">결론</span><a href="#결론-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ol>
  <li><code class="language-plaintext highlighter-rouge">@StateObject</code>는 <strong>뷰의 생명주기 동안 인스턴스를 유지</strong>하므로, API 조회 결과가 유지.</li>
  <li><code class="language-plaintext highlighter-rouge">@ObservedObject</code>는 <strong>뷰가 재렌더링될 때마다 인스턴스를 새로 생성</strong>하므로, API 조회 결과가 초기화.</li>
</ol>

<h2 id="11-결과"><span class="me-2">11. 결과</span><a href="#11-결과" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-observedobject"><span class="me-2">1. ObservedObject</span><a href="#1-observedobject" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><a href="https://github.com/user-attachments/assets/830126b9-5924-48ca-9842-dbe30c097f7e" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/830126b9-5924-48ca-9842-dbe30c097f7e" alt="Nov-15-2024 11-55-47" width="50%" height="50%" loading="lazy"></a></p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ApiDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">testWishViewModel</span> <span class="o">=</span> <span class="kt">TestWishViewModel</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<p>장바구니 UI가 변하면서 api를 재호출함.</p>

<p>재호출 하는 이유는 새롭게 만든 ViewModel에</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="kd">@MainActor</span>
<span class="kd">class</span> <span class="kt">TestWishViewModel</span><span class="p">:</span> <span class="kt">ObservableObject</span> <span class="p">{</span>
    <span class="kd">@Published</span> <span class="k">var</span> <span class="nv">wishList</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WishModel</span><span class="p">]()</span>

    <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kt">Task</span> <span class="p">{</span>
            <span class="k">await</span> <span class="nf">fetchWishList</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">fetchWishList</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">randomNumber</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="kt">Int</span><span class="o">.</span><span class="nf">random</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="mi">1</span><span class="o">...</span><span class="mi">194</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"https://dummyjson.com/products/</span><span class="se">\(</span><span class="n">randomNumber</span><span class="se">)</span><span class="s">"</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">list</span><span class="p">:</span> <span class="kt">WishModel</span> <span class="o">=</span> <span class="k">await</span> <span class="kt">WishService</span><span class="p">()</span><span class="o">.</span><span class="nf">downLoadData</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>

        <span class="n">wishList</span> <span class="o">=</span> <span class="p">[</span><span class="n">list</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이렇게 init을 해주었기 때문.</p>

<p>init을 하지않고 기존에 만들어둔 WishViewModel을 사용하면 wishList가 빈배열이므로 아무 결과도 나오지 않는다.</p>

<h3 id="2-stateobject"><span class="me-2">2. @StateObject</span><a href="#2-stateobject" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ApiDataSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">testWishViewModel</span> <span class="o">=</span> <span class="kt">TestWishViewModel</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<p><a href="https://github.com/user-attachments/assets/090fd539-765b-4981-8727-65ef68964574" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/090fd539-765b-4981-8727-65ef68964574" alt="Nov-15-2024 11-54-13" width="50%" height="50%" loading="lazy"></a></p>

<p>장바구니 UI가 변해도 API 조회 결과가 그대로 유지된다.</p>

<h3 id="3-한화면에-보여지게-수정"><span class="me-2">3. 한화면에 보여지게 수정</span><a href="#3-한화면에-보여지게-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span> <span class="o">=</span> <span class="kt">CartViewModel</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">ScrollView</span> <span class="p">{</span>
            <span class="kt">VStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// ObservedObject 섹션</span>
                <span class="kt">VStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"ObservedObject - API 조회"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                    <span class="kt">ApiDataSubview</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">180</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">blue</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span>
                <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

                <span class="c1">// StateObject 섹션</span>
                <span class="kt">VStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"StateObject - API 조회"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
                    <span class="kt">ApiStateSubview</span><span class="p">(</span><span class="nv">cartViewModel</span><span class="p">:</span> <span class="n">cartViewModel</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">180</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span>
                <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

                <span class="c1">// 장바구니 내용 섹션</span>
                <span class="kt">VStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"장바구니 내용"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

                    <span class="kt">List</span><span class="p">(</span><span class="n">cartViewModel</span><span class="o">.</span><span class="n">cart</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="p">??</span> <span class="s">"No Title"</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">80</span><span class="p">)</span>

                    <span class="kt">Button</span><span class="p">(</span><span class="s">"장바구니 초기화"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">deleteAllData</span><span class="p">()</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">vertical</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">green</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span>
                <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">navigationBarHidden</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// NavigationBar 완전히 숨기기</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>그리고 view하나더 만들었다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="kd">struct</span> <span class="kt">ApiStateSubview</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">testWishViewModel</span> <span class="o">=</span> <span class="kt">TestWishViewModel</span><span class="p">()</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">cartViewModel</span><span class="p">:</span> <span class="kt">CartViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"API 조회 결과 - StateObject"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>

            <span class="k">if</span> <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="n">testWishViewModel</span><span class="o">.</span><span class="n">wishList</span><span class="o">.</span><span class="n">first</span> <span class="p">{</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"담기"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">cartViewModel</span><span class="o">.</span><span class="nf">addCart</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="o">.</span><span class="n">borderedProminent</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.9</span><span class="p">))</span>
                <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="p">}</span> 

            <span class="kt">Button</span><span class="p">(</span><span class="s">"API 조회"</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Task</span> <span class="p">{</span>
                    <span class="k">await</span> <span class="n">testWishViewModel</span><span class="o">.</span><span class="nf">fetchWishList</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>
<p>ApiDataSubview, ApiStateSubview 이렇게 만들었고 ApiDataSubview의 코드도 위의 코드와 동일하게 하되 <code class="language-plaintext highlighter-rouge">@observedobject</code> 이걸로만 바꿨다.</p>

<p><a href="https://github.com/user-attachments/assets/11728d51-68f3-4a1e-8e4e-eb825c51f7ee" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/11728d51-68f3-4a1e-8e4e-eb825c51f7ee" alt="simulator_screenshot_BBEB06E1-85A2-4F39-A73A-C4AB6222A6E7" width="50%" height="50%" loading="lazy"></a></p>

<p>그러면 이렇게 한화면에서 비교가 가능해진다.</p>

<p><a href="https://github.com/user-attachments/assets/6aee8f53-6251-4912-82e1-962b83a4ac81" class="popup img-link  shimmer"><img src="https://github.com/user-attachments/assets/6aee8f53-6251-4912-82e1-962b83a4ac81" alt="Nov-16-2024 15-04-28" width="50%" height="50%" loading="lazy"></a></p>

<p>내가 생각한대로 결과가 나온다. 하지만 이걸하면서 느낀건 부모뷰와 자식관계에 따라 @StateObject, @ObservableObject의 결과가 같을수도 다를수도 있다는것.</p>

<h3 id="stateobject-vs-observedobject-가설과-결과-분석"><span class="me-2"><code class="language-plaintext highlighter-rouge">@StateObject</code> vs <code class="language-plaintext highlighter-rouge">@ObservedObject</code> 가설과 결과 분석</span><a href="#stateobject-vs-observedobject-가설과-결과-분석" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>이건 GPT를 통해 정리를 해달라고했다.</p>

<h4 id="초기-가설"><span class="me-2">초기 가설</span><a href="#초기-가설" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>처음에 내가 생각한 가설은 위에도 언급했었던</p>

<blockquote>
  <p>화면하나에 api를 호출하는게 있고 위에 장바구니 초기화 버튼이 있다.</p>
  <blockquote>
    <p>api조회를 한 결과가 화면에 있고 장바구니 초기화를 눌렀을때 api결과가 그대로인상태에서 장바구니가 초기화되면 stateobject
api조회를 한 결과가 화면에 있고 장바구니 초기화를 눌렀을때 api결과가 초기화되고 장바구니가 초기화되면 observedobject</p>
  </blockquote>
</blockquote>

<p>이것이다.</p>

<ul>
  <li><strong>화면 구성</strong>:
    <ul>
      <li>API 호출 결과를 표시하는 뷰와, 장바구니 초기화 버튼이 있는 화면을 가정.</li>
    </ul>
  </li>
  <li><strong>가설</strong>:
    <ul>
      <li>API 조회 결과가 화면에 표시된 상태에서, <strong>장바구니 초기화 버튼을 눌렀을 때</strong>의 동작을 통해 차이를 확인할 수 있음:
        <ul>
          <li><strong><code class="language-plaintext highlighter-rouge">@StateObject</code> 사용 시</strong>: API 조회 결과는 <strong>초기화되지 않고 그대로 유지</strong>되며, <strong>장바구니 데이터만 초기화</strong>됨.</li>
          <li><strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code> 사용 시</strong>: API 조회 결과가 <strong>뷰모델의 초기 값으로 리셋</strong>되며, <strong>장바구니 데이터와 함께 초기화</strong>됨.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="시행착오-과정"><span class="me-2">시행착오 과정</span><a href="#시행착오-과정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<h5 id="1-초기-테스트-실패"><span class="me-2">1. <strong>초기 테스트 실패</strong></span><a href="#1-초기-테스트-실패" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li><strong>문제</strong>:
    <ul>
      <li>처음에는 <strong>부모-자식 관계 없이 하나의 뷰에서</strong> <code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code>를 비교 테스트함.</li>
      <li>이 경우, <strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code> 모두 동일한 결과</strong>가 나타남.</li>
      <li>API 조회 결과는 유지되고, 장바구니 초기화 시 API 결과는 초기화되지 않음.</li>
    </ul>
  </li>
  <li><strong>원인 분석</strong>:
    <ul>
      <li><strong>단일 뷰에서 테스트</strong>했을 때는, <code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code>의 차이가 드러나지 않음.</li>
      <li><code class="language-plaintext highlighter-rouge">@ObservedObject</code>는 부모 뷰에서 객체를 주입받을 때 차이가 나타나지만, 단일 뷰에서는 객체를 직접 생성하므로 사실상 <code class="language-plaintext highlighter-rouge">@StateObject</code>와 같은 동작을 함.</li>
    </ul>
  </li>
</ul>

<h5 id="2-부모-자식-관계를-통한-재테스트"><span class="me-2">2. <strong>부모-자식 관계를 통한 재테스트</strong></span><a href="#2-부모-자식-관계를-통한-재테스트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li><strong>변경 사항</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">TestView</code>를 부모 뷰로 만들고, <code class="language-plaintext highlighter-rouge">ApiDataSubview</code>와 <code class="language-plaintext highlighter-rouge">ApiStateSubview</code>를 자식 뷰로 분리함.</li>
      <li><code class="language-plaintext highlighter-rouge">ApiDataSubview</code>는 <code class="language-plaintext highlighter-rouge">@ObservedObject</code>를 사용하고, <code class="language-plaintext highlighter-rouge">ApiStateSubview</code>는 <code class="language-plaintext highlighter-rouge">@StateObject</code>를 사용하도록 수정함.</li>
    </ul>
  </li>
  <li><strong>결과</strong>:
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">@StateObject</code></strong>는 API 조회 결과를 <strong>유지</strong>하며, 장바구니 초기화 후에도 데이터가 그대로 유지됨.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code></strong>는 부모 뷰의 재생성에 따라 <strong>뷰모델이 초기화</strong>되어, API 조회 결과가 <strong>초기 값으로 리셋</strong>됨.</li>
    </ul>
  </li>
</ul>

<h5 id="3-상황별-결과-확인"><span class="me-2">3. <strong>상황별 결과 확인</strong></span><a href="#3-상황별-결과-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<ul>
  <li>부모 뷰의 생명 주기와 객체 관리 방식에 따라, <strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code>의 결과가 다를 수 있음</strong>을 확인함.</li>
  <li>이 실험을 통해, 부모 뷰에서 객체를 생성하고 전달할 때(<code class="language-plaintext highlighter-rouge">@ObservedObject</code>)와 자식 뷰에서 객체를 직접 생성할 때(<code class="language-plaintext highlighter-rouge">@StateObject</code>)의 차이를 명확하게 이해할 수 있었음.</li>
</ul>

<h4 id="시행착오-요약"><span class="me-2">시행착오 요약</span><a href="#시행착오-요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li>단일 뷰에서 테스트할 때, <strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code>의 차이가 드러나지 않아 잘못된 결론에 도달할 뻔함</strong>.</li>
  <li>부모-자식 뷰 관계를 고려한 재테스트를 통해, <strong>객체의 생명 주기와 상태 관리 차이</strong>를 명확하게 이해할 수 있었음.</li>
  <li><strong>부모-자식 관계</strong>에서만 <code class="language-plaintext highlighter-rouge">@ObservedObject</code>와 <code class="language-plaintext highlighter-rouge">@StateObject</code>의 차이가 제대로 나타나므로, 상태 관리 시 이 관계를 고려해야 함.</li>
</ul>

<h4 id="시행착오-후-수정된-결론"><span class="me-2">시행착오 후 수정된 결론</span><a href="#시행착오-후-수정된-결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<ul>
  <li><strong>부모 뷰와 자식 뷰의 관계</strong>에 따라 <strong><code class="language-plaintext highlighter-rouge">@StateObject</code></strong>와 <strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code></strong>의 결과가 <strong>같을 수도 있고, 다를 수도 있음</strong>을 발견함.</li>
  <li><strong>결과 차이의 원인</strong>:
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">@StateObject</code></strong>는 자식 뷰에서 직접 객체를 생성하고 관리하므로, <strong>독립적인 생명 주기</strong>를 가짐. 이 경우, 부모 뷰의 상태 변화와 무관하게 <strong>API 조회 결과가 유지</strong>됨.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">@ObservedObject</code></strong>는 부모 뷰에서 객체를 전달받아 사용하므로, <strong>부모 뷰의 생명 주기에 따라 객체가 재생성</strong>될 수 있음. 이 경우, 부모 뷰의 상태 변화가 있을 때 <strong>API 조회 결과가 초기화</strong>될 가능성이 있음.</li>
    </ul>
  </li>
</ul>

<h4 id="결론-5"><span class="me-2">결론</span><a href="#결론-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>항목</th>
      <th><code class="language-plaintext highlighter-rouge">@StateObject</code> 사용 시</th>
      <th><code class="language-plaintext highlighter-rouge">@ObservedObject</code> 사용 시</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>API 결과 유지 여부</strong></td>
      <td>API 결과는 그대로 유지됨</td>
      <td>API 결과가 초기 값으로 리셋될 수 있음</td>
    </tr>
    <tr>
      <td><strong>객체의 생명 주기</strong></td>
      <td>자식 뷰에서 독립적으로 관리됨</td>
      <td>부모 뷰의 생명 주기에 따라 변경될 수 있음</td>
    </tr>
    <tr>
      <td><strong>장바구니 초기화 후 동작</strong></td>
      <td>API 결과는 유지되고, 장바구니만 초기화됨</td>
      <td>API 결과와 장바구니 모두 초기화됨</td>
    </tr>
    <tr>
      <td><strong>상황 설명</strong></td>
      <td>부모 뷰의 상태 변화에 영향을 받지 않음</td>
      <td>부모 뷰의 상태 변화에 영향을 받음</td>
    </tr>
  </tbody>
</table></div>

<h3 id="결론-요약"><span class="me-2">결론 요약</span><a href="#결론-요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@StateObject</code>와 <code class="language-plaintext highlighter-rouge">@ObservedObject</code>의 차이는 <strong>객체의 생성과 생명 주기 관리</strong>에서 비롯되며, 부모 뷰와 자식 뷰 간의 관계에 따라 <strong>결과가 달라질 수 있음</strong>.</li>
  <li><strong>독립적인 상태 유지</strong>가 필요하면 <code class="language-plaintext highlighter-rouge">@StateObject</code>를 사용하고, <strong>부모 뷰의 상태와 동기화</strong>가 필요하면 <code class="language-plaintext highlighter-rouge">@ObservedObject</code>를 사용하는 것이 적합함.</li>
  <li>이 차이를 이해하면 SwiftUI에서 더 예측 가능하고 안정적인 상태 관리를 할 수 있음.</li>
</ul>

<p>진짜 끝.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/study/">Study</a>,
          <a href="/categories/tourapp/">TourApp</a>
      </div>
    

    <!-- tags -->
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          이 기사는 저작권자의 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         라이센스를 따릅니다.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">공유하기</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=CartAppTest%20-%20Harold%60s%20DLog&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FObjectTest%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=CartAppTest%20-%20Harold%60s%20DLog&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FObjectTest%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FObjectTest%2F&text=CartAppTest%20-%20Harold%60s%20DLog" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="링크 복사하기"
      data-title-succeed="링크가 복사되었습니다!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
<script src="https://utteranc.es/client.js"
  repo="haroldfromk/haroldfromk.github.io"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>

</article>



            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">최근 업데이트</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/ObjectTest/">CartAppTest</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/(Deep-Dive)-Object/">(Deep Dive) @ObservedObject vs @StateObject</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/TourApp_6/">TourApp (6)</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/TourApp_5/">TourApp (5)</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/TourApp_4/">TourApp (4)</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8/">코딩테스트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EB%B3%B4%EB%A5%98%EC%A4%91/">보류중</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">SwiftUI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/myself/">Myself</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EB%B3%B4%EB%A5%98%ED%96%88%EB%8D%98%EB%AC%B8%EC%A0%9C/">보류했던문제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B3%BC%EC%A0%9C/">과제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/api/">API</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/networking/">Networking</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%95%BC%EA%B5%AC/">야구</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/git/">Git</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">바로가기</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">관련된 글</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/TourApp_1/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1730676780"
  data-df="YYYY/MM/DD"
  
>
  2024/11/04
</time>

              <h4 class="pt-0 my-2">TourApp (1)</h4>
              <div class="text-muted">
                <p>
                  





                  이번엔 그냥 간단하게 관광지 소개 앱을 만들어 보려고 한다.

지금은 간단하게 하려고 하고 나중에 조금 더 발전 시킨다면 그때는

Grid를 사용해서 꾸미지 않을까나

List를 사용했고 기본적인것은 패스

이번엔 SwiftModel을 사용하지 않고 만들어 보려고 한다.

struct TourModel: Hashable {
    
    var ti...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/TourApp_2/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1730849580"
  data-df="YYYY/MM/DD"
  
>
  2024/11/06
</time>

              <h4 class="pt-0 my-2">TourApp (2)</h4>
              <div class="text-muted">
                <p>
                  





                  DetailView 꾸미기

MapKit 사용하기

먼저 import를 해준다.

내용은 사이트

Map(position: $cameraPosition) {
                Annotation(title, coordinate: coordinate) {
                    ZStack {
                    ...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/TourApp_3/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1730935980"
  data-df="YYYY/MM/DD"
  
>
  2024/11/07
</time>

              <h4 class="pt-0 my-2">TourApp (3)</h4>
              <div class="text-muted">
                <p>
                  





                  DetailView 꾸미기 &amp;amp; PageView 꾸미기

Page view 꾸미기

이전에 회고를 하던도중 Tabview를 통해 UIKit의 TabBarViewController로 쓸수있고 이미지를 페이징하면서 넘기는 방식으로도 사용이 가능하다고 하여 그걸 적용해보기로했다.

@State private var currentPage: Int = 0...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/(Deep-Dive)-Object/"
      class="btn btn-outline-primary"
      aria-label="이전 글"
    >
      <p>(Deep Dive) @ObservedObject vs @StateObject</p>
    </a>
  

  
    <div class="btn btn-outline-primary disabled" aria-label="다음 글">
      <p>-</p>
    </div>
  
</nav>

            
              
              <!--  The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://github.com/haroldfromk">Dongik Song</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다."
      >일부 권리 보유</span>
    
  </p>

  <p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">인기 태그</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8/">코딩테스트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EB%B3%B4%EB%A5%98%EC%A4%91/">보류중</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/swiftui/">SwiftUI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/myself/">Myself</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EB%B3%B4%EB%A5%98%ED%96%88%EB%8D%98%EB%AC%B8%EC%A0%9C/">보류했던문제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B3%BC%EC%A0%9C/">과제</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/api/">API</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/networking/">Networking</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%95%BC%EA%B5%AC/">야구</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/git/">Git</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      업데이트
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/ko.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  





    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

